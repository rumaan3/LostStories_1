(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{125:function(e,t,i){"use strict";var s=i(68),o=i(12),n=i.n(o);function a(e,t,i,s,o,n,a){try{var d=e[n](a),r=d.value}catch(e){return void i(e)}d.done?t(r):Promise.resolve(r).then(s,o)}var d={props:["episode","podcast_id","uploader"],components:{veutifySelect:s.a},data:function(){var e=this;return{firstCopy:JSON.parse(JSON.stringify(this.episode)),rules:{fileSize:function(t){return(null==t?void 0:t.size)<1024*parseInt(e.$store.getters.getSettings.maxFileSize)*1024||"Max file size is "+e.$store.getters.getSettings.maxFileSize+e.$t("MB")}},editedEpisode:this.episode,episodeFile:null,artistsFocused:!1,rolesDialog:!1,progress:null,isLoading:!1,fileSize:null,episodeSourceLoading:!1,sourceFormats:[{value:"file",text:this.$t("Audio File"),icon:"file-chart"},{value:"yt_video",text:this.$t("YouTube Video"),icon:"youtube"}],autoDuration:!0,error:!1}},computed:{sourceMissing:function(){return!this.episodeFile&&!this.editedEpisode.source}},methods:{imageReady:function(e){this.editedEpisode.cover=e},loadEpisodeMetadata:function(e){var t=this;return e?(this.episodeSourceLoading=!0,new Promise((function(i,s){t.getAudioMetadata(e||t.editedEpisode.source,function(t){if(!t)return this.$notify({group:"foo",type:"error",title:this.$t("File corrupted!"),text:this.$t("The source file you are trying to upload is corrupted.")}),this.episodeSourceLoading=!1,void s();this.episodeFile=e,this.fileSize=e.size,this.editedEpisode.duration=Math.floor(t.duration),this.episodeSourceLoading=!1,i()}.bind(t))}))):(this.episodeFile=null,this.editedEpisode.source=null)},closeWindow:function(){var e=this,t=!1;this.editedEpisode.title!=this.firstCopy.title&&(t=!0),this.episodeFile||t?this.$confirm({message:"".concat(this.$t("Are you sure you wanna quit without saving the changes ? maybe consider just hiding the window.")),button:{no:this.$t("Cancel"),yes:this.$t("Discard")},callback:function(t){t&&(e.editedEpisode.requestSource&&e.editedEpisode.requestSource.cancel(),e.editedEpisode.title=e.firstCopy.title,e.$emit("close"))}}):this.$emit("close")},cancelRequest:function(){this.editedEpisode.progress=null,this.editedEpisode.requestSource.cancel("upload canceled")},getYoutubeVideoID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e){if(11===e.length)return e;var t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,i=e.match(t);return i&&11==i[7].length?i[7]:""}return""},saveEpisode:function(){var e,t=this;return(e=n.a.mark((function e(){var i,s,o,a,d;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=new FormData).append("podcast_id",t.podcast_id),i.append("description",t.editedEpisode.description||""),i.append("title",t.editedEpisode.title||""),t.isLoading=!0,"yt_video"!==t.editedEpisode.source_format){e.next=15;break}if(o=t.getYoutubeVideoID(t.editedEpisode.source),!t.editedEpisode.source||!o){e.next=11;break}i.append("source",o),e.next=12;break;case 11:return e.abrupt("return",t.$notify({group:"foo",type:"error",title:t.$t("Error"),text:t.$t("Please add a valid YouTube video ID or URL.")}));case 12:s=t.editedEpisode.duration,e.next=16;break;case 15:"file"===t.editedEpisode.source_format&&(a=new Promise((function(e,i){if(!t.episodeFile&&!t.editedEpisode.source)return t.$notify({group:"foo",type:"error",title:t.$t("Error"),text:t.$t("Please add a valid source file.")});!t.autoDuration&&t.editedEpisode.duration>1?(s=t.editedEpisode.duration,e()):(t.loadEpisodeMetadata(t.episodeFile?t.episodeFile:t.editedEpisode.source),s=t.editedEpisode.duration,e())})));case 16:if(!a){e.next=25;break}return e.prev=17,e.next=20,a;case 20:e.next=25;break;case 22:return e.prev=22,e.t0=e.catch(17),e.abrupt("return",t.$notify({group:"foo",type:"error",title:t.$t("Error"),text:e.t0}));case 25:d=axios.CancelToken.source(),t.editedEpisode.requestSource=d,t.isLoading=!0,i.append("source_format",t.editedEpisode.source_format),t.$emit("sleep"),t.episodeFile&&(i.append("source",t.episodeFile),i.append("file_size",t.fileSize)),i.append("duration",s||""),t.editedEpisode.new?(i.append("new",!0),i.append("uploaded_by",t.uploader),t.createNewEpisode(i)):(i.append("id",t.editedEpisode.id),t.updateEpisode(i));case 33:case"end":return e.stop()}}),e,null,[[17,22]])})),function(){var t=this,i=arguments;return new Promise((function(s,o){var n=e.apply(t,i);function d(e){a(n,s,o,d,r,"next",e)}function r(e){a(n,s,o,d,r,"throw",e)}d(void 0)}))})()},updateEpisode:function(e){var t=this;e.append("_method","PUT"),axios.post("/api/episodes/"+this.editedEpisode.id,e,{headers:{"Content-Type":"multipart/form-data"},cancelToken:this.editedEpisode.requestSource.token,onUploadProgress:function(e){var i=Math.floor(100*e.loaded/e.total);t.progress=100===i?99:i,t.$emit("progress",t.progress)}}).then((function(e){t.$emit("updated"),t.$emit("progress",100),t.editedEpisode=e.data,t.isLoading=!1,t.$emit("close")})).catch((function(e){t.editedEpisode.progress=null,t.isLoading=!1,t.$emit("wake"),t.$notify({group:"foo",type:"error",title:t.$t("Error"),text:Object.values(e.response.data.errors).join("<br />")})}))},resetSource:function(e){this.editedEpisode.source=null,"yt_video"===e?this.autoDuration=!1:"file"===e&&(this.autoDuration=!0)},createNewEpisode:function(e){var t=this;axios.post("/api/episodes",e,{headers:{"Content-Type":"multipart/form-data"},cancelToken:this.editedEpisode.requestSource.token,onUploadProgress:function(e){var i=Math.floor(100*e.loaded/e.total);t.progress=100===i?99:i,t.$emit("progress",t.progress)}}).then((function(e){t.editedEpisode.id=e.data.id,t.editedEpisode.source=e.data.source,t.editedEpisode.new=!1,t.$emit("progress",100),t.$emit("created"),t.$emit("close"),t.isLoading=!1})).catch((function(e){t.editedEpisode.progress=null,t.$emit("wake"),t.isLoading=!1,t.$notify({group:"foo",type:"error",title:t.$t("Error"),text:Object.values(e.response.data.errors).join("<br />")})}))}}},r=i(0),c=i(1),l=i.n(c),u=i(81),p=i(559),h=i(860),v=i(871),f=i(75),m=i(558),g=i(765),b=i(41),_=i(602),y=Object(r.a)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("edit-dialog",{attrs:{loading:e.isLoading,hideCallToAction:!0,editing:"episode"},on:{callToAction:e.saveEpisode,cancel:e.closeWindow},scopedSlots:e._u([{key:"body",fn:function(){return[i("v-container",[i("v-row",[i("v-col",{attrs:{cols:"5"}},[i("veutifySelect",{attrs:{outlined:"",items:e.sourceFormats,label:e.$t("Source Format"),"item-value":"value"},on:{change:e.resetSource},scopedSlots:e._u([{key:"item",fn:function(t){var s=t.item;return[i("div",{staticClass:"align-center p-1"},[i("v-icon",{staticClass:"mr-2",attrs:{color:"primary"}},[e._v("$vuetify.icons."+e._s(s.icon))]),e._v("\n                                "+e._s(s.text)+"\n                            ")],1)]}},{key:"selection",fn:function(t){var s=t.item;return[i("div",{staticClass:"align-center p-1"},[i("v-icon",{staticClass:"mr-2",attrs:{color:"primary"}},[e._v("$vuetify.icons."+e._s(s.icon))]),e._v("\n                                "+e._s(s.text)+"\n                            ")],1)]}}]),model:{value:e.editedEpisode.source_format,callback:function(t){e.$set(e.editedEpisode,"source_format",t)},expression:"editedEpisode.source_format"}})],1),e._v(" "),i("v-col",{attrs:{cols:"7"}},["file"===e.editedEpisode.source_format?i("v-file-input",{attrs:{rules:[e.rules.fileSize],accept:"audio/*","show-size":"",outlined:"",label:e.editedEpisode.file_name?e.editedEpisode.file_name:e.$t("Attach Audio File"),loading:e.episodeSourceLoading},on:{"update:error":function(t){e.error=t},change:function(t){return e.loadEpisodeMetadata(t)}},model:{value:e.episodeFile,callback:function(t){e.episodeFile=t},expression:"episodeFile"}}):"yt_video"===e.editedEpisode.source_format?i("v-text-field",{attrs:{label:e.$t("Video URL"),hint:e.$t("You can add the video ID, but It must be valid."),outlined:""},model:{value:e.editedEpisode.source,callback:function(t){e.$set(e.editedEpisode,"source",t)},expression:"editedEpisode.source"}}):e._e()],1)],1),e._v(" "),i("v-row",[i("v-col",[i("v-text-field",{attrs:{label:e.$t("Title"),dense:"",outlined:"","hide-details":""},model:{value:e.editedEpisode.title,callback:function(t){e.$set(e.editedEpisode,"title",t)},expression:"editedEpisode.title"}})],1)],1),e._v(" "),i("v-row",{attrs:{justify:"center"}},[i("v-col",{attrs:{cols:"6",sm:"8"}},[i("v-text-field",{attrs:{label:e.$t("Duration"),placeholder:e.$t("Duration in seconds"),type:"number",outlined:"",dense:"","hide-details":"",disabled:e.autoDuration},model:{value:e.editedEpisode.duration,callback:function(t){e.$set(e.editedEpisode,"duration",t)},expression:"editedEpisode.duration"}})],1),e._v(" "),i("v-col",{attrs:{cols:"6",sm:"4"}},[i("v-switch",{attrs:{dense:"","hide-details":"",label:e.$t("Auto Duration"),disabled:"yt_video"===e.editedEpisode.source_format},on:{change:function(t){t&&e.loadEpisodeMetadata(e.episodeFile||e.editedEpisode.source)}},model:{value:e.autoDuration,callback:function(t){e.autoDuration=t},expression:"autoDuration"}})],1)],1),e._v(" "),i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-textarea",{attrs:{outlined:"",label:e.$t("Description"),"hide-details":"",hint:e.$t("General description of the episode."),disabled:e.sourceMissing},model:{value:e.editedEpisode.description,callback:function(t){e.$set(e.editedEpisode,"description",t)},expression:"editedEpisode.description"}})],1)],1),e._v(" "),i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("div",[e.isLoading&&e.progress?i("div",{staticClass:"button-upload"},[i("button",{staticClass:"uploading my-2  v-btn v-btn--block v-btn--contained theme--dark v-size--default",attrs:{color:"transparent"}},[i("div",{staticClass:"content-text"},[e._v("\n                                    "+e._s(e.$t("Saving..."))+"\n                                    "+e._s(e.progress)+"%\n                                ")]),e._v(" "),i("div",{staticClass:"percentage success",style:{width:e.progress+"%"}})]),e._v(" "),i("v-btn",{staticClass:"cancel my-2 ",attrs:{block:"",color:"error"},on:{click:function(t){return e.cancelRequest()}}},[e._v("\n                                "+e._s(e.$t("Cancel"))+"\n                            ")])],1):i("v-btn",{staticClass:"my-2 success",attrs:{block:"",disabled:e.error},on:{click:e.saveEpisode}},[e._v(e._s(e.$t("Save"))+"\n                        ")])],1)])],1)],1)]},proxy:!0}])})}),[],!1,null,null,null),$=y.exports;l()(y,{VBtn:u.a,VCol:p.a,VContainer:h.a,VFileInput:v.a,VIcon:f.a,VRow:m.a,VSwitch:g.a,VTextField:b.a,VTextarea:_.a});var x={props:["podcast","creator"],components:{veutifySelect:s.a,editEpisodeDialog:$},computed:{isShowing:function(){var e=this;return function(t){return e.editedPodcast.episodes[e.editedPodcast.episodes.findIndex((function(e){return e.id===t}))].isShowing}}},created:function(){var e=this;axios.get("/api/podcast-genres").then((function(t){return e.genres=t.data}))},data:function(){return{editedPodcast:this.podcast,firstCopy:JSON.parse(JSON.stringify(this.podcast)),artistsFocused:!1,editDialog:!1,search:null,defaultCoverPath:"/storage/defaults/images/podcast_cover.png",genres:[],editingEpisode:null,genresFocused:!1,artists:[],isLoading:!1,errors:{},progress:null,episodeTableHeaders:[{text:this.$t("Cover"),value:"cover",align:"center"},{text:this.$t("Title"),value:"title"},{text:this.$t("Likes"),value:"nb_likes",align:"center"},{text:this.$t("Duration"),value:"duration",align:"center"},{text:this.$t("Number of plays"),value:"nb_plays",align:"center"},{text:this.$t("Created At"),value:"created_at",align:"center"},{text:this.$t("Operations"),value:"operations",align:"center"}]}},beforeDestroy:function(){this.$emit("beforeDestroy")},methods:{closeWindow:function(){var e=this,t=!1;JSON.stringify(this.editedPodcast)!=JSON.stringify(this.firstCopy)&&(t=!0),t?this.$confirm({message:"".concat(this.$t("Are you sure you wanna quit without saving the changes ? maybe consider just hiding the window.")),button:{no:this.$t("Cancel"),yes:this.$t("Discard")},callback:function(t){t&&(e.editedPodcast.title=e.firstCopy.title,e.editedPodcast.genres=e.firstCopy.genres,e.editedPodcast.artist=e.firstCopy.artist,e.editedPodcast.description=e.firstCopy.description,e.editedPodcast.cover=e.firstCopy.cover,e.$emit("close"))}}):this.$emit("close")},updateProgress:function(e,t){var i=this.editedPodcast.episodes.findIndex((function(e){return e.id===t}));this.$set(this.editedPodcast.episodes[i],"progress",e)},cancelUpload:function(e){var t=this.editedPodcast.episodes.findIndex((function(t){return t.id===e}));this.editedPodcast.episodes[t].requestSource.cancel(),this.editEpisode(e)},sleepEpisode:function(e){this.editDialog=!1;var t=this.editedPodcast.episodes.findIndex((function(t){return t.id===e}));this.$set(this.editedPodcast.episodes[t],"isShowing",!1)},wakeEpisode:function(e){this.editDialog=!0;var t=this.editedPodcast.episodes.findIndex((function(t){return t.id===e}));this.$set(this.editedPodcast.episodes[t],"isShowing",!0)},hideAllepisodes:function(){for(var e=0;e<this.editedPodcast.episodes.length;e++)this.$set(this.editedPodcast.episodes[e],"isShowing",!1);this.editDialog=!1},imageReady:function(e){this.editedPodcast.cover=e},deleteEpisode:function(e){var t=this;this.$confirm({message:"".concat(this.$t("Are you sure you wanna delete this")+" "+this.$t("episode")+"?"),button:{no:this.$t("No"),yes:this.$t("Yes")},callback:function(i){if(i){var s=t.editedPodcast.episodes.findIndex((function(t){return t.id===e}));t.editedPodcast.episodes[s].requestSource&&t.editedPodcast.episodes[s].requestSource.cancel(),t.editedPodcast.episodes.splice(s,1),axios.delete("/api/episodes/"+e).then((function(){t.$notify({group:"foo",type:"success",title:t.$t("Deleted"),text:t.$t("Episode")+" "+t.$t("Deleted")+"."})})).catch((function(e){}))}}})},editEpisode:function(e){"new"===e?(this.editedPodcast.episodes.unshift({id:Math.floor(95e3*Math.random()+1e5),new:!0,genres:[],isActive:!0,isShowing:!0,source:"",nb_likes:0,nb_plays:0,source_format:"file"}),this.editDialog=!0):(this.editedPodcast.episodes[this.editedPodcast.episodes.findIndex((function(t){return t.id===e}))].isActive=!0,this.editedPodcast.episodes[this.editedPodcast.episodes.findIndex((function(t){return t.id===e}))].isShowing=!0,this.editDialog=!0)},closeEpisode:function(e){var t=this.editedPodcast.episodes.findIndex((function(t){return t.id===e}));this.editedPodcast.episodes[t].isShowing&&(this.editDialog=!1),this.editedPodcast.episodes[t].new&&this.editedPodcast.episodes.splice(t,1),this.$set(this.editedPodcast.episodes[t],"isShowing",!1),this.$set(this.editedPodcast.episodes[t],"isActive",!1),this.$forceUpdate()},episodeEdited:function(e){var t=this.editedPodcast.episodes.findIndex((function(t){return t.id===e}));this.$set(this.editedPodcast.episodes[t],"progress",0),this.$set(this.editedPodcast.episodes[t],"isActive",!1),this.$notify({group:"foo",type:"success",title:this.$t("Saved"),text:this.$t("Episode")+" "+this.$t("Updated")+"."})},episodeCreated:function(){this.savePodcast(),this.$notify({group:"foo",type:"success",title:this.$t("Created"),text:this.$t("Episode")+" "+this.$t("Created")+"."})},fetchArtists:function(e,t){var i=this;e&&(t(!0),axios.get("/api/match-artists/"+e).then((function(e){return i.artists=e.data.map((function(e){return{id:e.id,displayname:e.displayname,avatar:e.avatar}}))})).then((function(){return t(!1)})).catch((function(){return t(!1)})))},savePodcast:function(e){var t=this,i=new FormData;this.isLoading=!0,this.editedPodcast.cover&&this.editedPodcast.cover.data?i.append("cover",this.editedPodcast.cover.data,this.editedPodcast.cover.title):this.editedPodcast.cover&&!this.editedPodcast.cover.data?i.append("cover",this.editedPodcast.cover):i.append("cover",this.defaultCoverPath),this.editedPodcast.genres.length&&i.append("genres",JSON.stringify(this.editedPodcast.genres)),this.editedPodcast.title&&i.append("title",this.editedPodcast.title),this.editedPodcast.spotify_link&&i.append("spotify_link",this.editedPodcast.title),this.editedPodcast.youtube_link&&i.append("youtube_link",this.editedPodcast.youtube_link),this.editedPodcast.soundcloud_link&&i.append("soundcloud_link",this.editedPodcast.soundcloud_link),this.editedPodcast.itunes_link&&i.append("itunes_link",this.editedPodcast.itunes_link),this.editedPodcast.deezer_link&&i.append("deezer_link",this.editedPodcast.deezer_link),"admin"===this.creator?this.editedPodcast.artist?i.append("artist_id",this.editedPodcast.artist.id):i.append("artist_id",""):"artist"===this.creator?i.append("artist_id",this.$store.getters.getArtist.id):i.append("artist_id",""),this.editedPodcast.description&&i.append("description",this.editedPodcast.description),this.editedPodcast.new?axios.post("/api/podcasts",i,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){var i=Math.floor(100*e.loaded/e.total);t.progress=i}}).then((function(){t.$emit("created"),t.isLoading=!1})).catch((function(e){t.progress=0,t.isLoading=!1,t.errors=e.response.data.errors})):(i.append("podcast_id",this.editedPodcast.id),i.append("_method","PUT"),axios.post("/api/podcasts/"+this.editedPodcast.id,i,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){var i=Math.floor(100*e.loaded/e.total);t.progress=i}}).then((function(){e&&t.$emit("updated"),t.isLoading=!1})).catch((function(e){t.progress=0,t.isLoading=!1})))}}},k=i(870),S=i(105),A=i(3),P=i(140),w=i(872),C=i(564),E=i(273),D=i(10),L=Object(r.a)(x,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("edit-dialog",{attrs:{loading:e.isLoading,fullscreen:!e.editedPodcast.new,editing:"Podcast"},on:{callToAction:function(t){return e.savePodcast(!0)},cancel:e.closeWindow},scopedSlots:e._u([{key:"body",fn:function(){return[i("v-container",[i("v-row",[i("v-col",{attrs:{cols:"auto"}},[i("upload-image",{attrs:{id:"podcast"+e.editedPodcast.id,source:e.editedPodcast.cover||e.defaultCoverPath},on:{imageReady:function(t){return e.imageReady(t)}}})],1),e._v(" "),i("v-col",[i("v-container",[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-text-field",{attrs:{label:e.$t("Title"),outlined:"","hide-details":"",dense:""},model:{value:e.editedPodcast.title,callback:function(t){e.$set(e.editedPodcast,"title",t)},expression:"editedPodcast.title"}})],1),e._v(" "),e.$route.path.match("admin/")?i("v-col",{attrs:{cols:"12"}},[i("select-artists",{attrs:{artists:e.editedPodcast.artist&&e.editedPodcast.artist.id?e.editedPodcast.artist:"",multiple:!1},on:{artists:function(t){e.editedPodcast.artist=t}}})],1):e._e(),e._v(" "),i("v-col",{attrs:{cols:"12"}},[i("v-autocomplete",{attrs:{items:e.genres,label:e.$t("Genres"),"item-text":"name","return-object":"",placeholder:e.$t("Select Genres"),multiple:"",outlined:""},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.item;return[i("v-chip",{attrs:{close:""},on:{"click:close":function(t){return e.remove(s.id)}}},[e._v("\n                      "+e._s(s.name)+"\n                    ")])]}},{key:"item",fn:function(t){var s=t.item;return[[i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:e._s(s.name)}})],1)]]}}]),model:{value:e.editedPodcast.genres,callback:function(t){e.$set(e.editedPodcast,"genres",t)},expression:"editedPodcast.genres"}})],1),e._v(" "),i("v-col",{attrs:{cols:"12"}},[i("v-textarea",{attrs:{outlined:"",label:e.$t("Description"),hint:"A general description of the podcast."},model:{value:e.editedPodcast.description,callback:function(t){e.$set(e.editedPodcast,"description",t)},expression:"editedPodcast.description"}})],1)],1)],1),e._v(" "),e.editedPodcast.new?e._e():i("v-container",{staticClass:"episodes mb-5"},[i("div",{staticClass:"episodes-wrapper"},[i("v-card",{attrs:{outlined:""}},[i("v-card-title",[i("v-icon",{attrs:{color:"primary","x-large":""}},[e._v("$vuetify.icons.music-note")]),e._v(" "),i("div",{staticClass:"large-icon-text tertiary--text"},[e._v("\n                    "+e._s(e.$t("Episodes"))+"\n                  ")]),e._v(" "),i("v-btn",{staticClass:"mx-2 ml-3",attrs:{dark:"",small:"",color:"primary"},on:{click:function(t){return e.editEpisode("new")}}},[i("v-icon",{attrs:{dark:e.$store.state.darkTheme||"dark"==e.$store.getters.getSettings.defaultTheme}},[e._v("$vuetify.icons.plus")]),e._v("\n                    "+e._s(e.$t("New"))+"\n                  ")],1)],1),e._v(" "),i("v-data-table",{attrs:{"no-data-text":e.$t("No data available"),"loading-text":e.$t("Fetching data")+"...",headers:e.episodeTableHeaders,items:e.editedPodcast.episodes,"hide-default-footer":"","items-per-page":1e4,loading:!e.editedPodcast.episodes},scopedSlots:e._u([{key:"item.created_at",fn:function(t){var i=t.item;return[e._v("\n                    "+e._s(e.moment(i.created_at).format("ll"))+"\n                  ")]}},{key:"item.cover",fn:function(t){var s=t.item;return[i("div",{staticClass:"img-container py-2"},[i("v-img",{staticClass:"user-avatar podcast-cover",attrs:{src:e.editedPodcast.cover,alt:e.editedPodcast.title,width:"50",height:"50"}},[null!=s.progress&&s.progress<100?i("div",{staticClass:"upload-percentage"},[i("div",{staticClass:"content-text"},[e._v(e._s(s.progress)+"%")])]):e._e()])],1)]}},{key:"item.duration",fn:function(t){var i=t.item;return[e._v("\n                    "+e._s(i.duration?e.mmss(i.duration):"")+"\n                  ")]}},{key:"item.operations",fn:function(t){var s=t.item;return[i("v-btn",{staticClass:"mx-2",attrs:{"x-small":"",fab:"",dark:"",color:"info"},on:{click:function(t){return e.editEpisode(s.id)}}},[i("v-icon",{attrs:{dark:e.$store.state.darkTheme||"dark"==e.$store.getters.getSettings.defaultTheme}},[e._v("$vuetify.icons.pencil")])],1),e._v(" "),i("v-btn",{staticClass:"mx-2",attrs:{"x-small":"",fab:"",dark:"",color:"error"},on:{click:function(t){return e.deleteEpisode(s.id)}}},[i("v-icon",[e._v("$vuetify.icons.delete")])],1)]}}],null,!1,3957771914)})],1)],1)])],1)],1),e._v(" "),i("v-row",[i("edit-external-links",{attrs:{item:e.editedPodcast},on:{spotify_link:function(t){e.editedPodcast.spotify_link=t},youtube_link:function(t){e.editedPodcast.youtube_link=t},soundcloud_link:function(t){e.editedPodcast.soundcloud_link=t},itunes_link:function(t){e.editedPodcast.itunes_link=t},deezer_link:function(t){e.editedPodcast.deezer_link=t}}})],1)],1)]},proxy:!0},{key:"dialogs",fn:function(){return[i("v-dialog",{attrs:{persistent:"",scrollable:"","max-width":"950"},on:{"click:outside":e.hideAllepisodes},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[e._l(e.editedPodcast.episodes,(function(t){return[t.isActive?i("edit-episode-dialog",{directives:[{name:"show",rawName:"v-show",value:e.isShowing(t.id),expression:"isShowing(episode.id)"}],key:t.id,attrs:{episode:t,uploader:e.creator,podcast_id:e.editedPodcast.id},on:{updated:function(i){return e.episodeEdited(t.id)},progress:function(i){return e.updateProgress(i,t.id)},created:e.episodeCreated,close:function(i){return e.closeEpisode(t.id)},sleep:function(i){return e.sleepEpisode(t.id)},wake:function(i){return e.wakeEpisode(t.id)}}}):e._e()]}))],2)]},proxy:!0}])})}),[],!1,null,null,null);t.a=L.exports;l()(L,{VAutocomplete:k.a,VBtn:u.a,VCard:S.a,VCardTitle:A.c,VChip:P.a,VCol:p.a,VContainer:h.a,VDataTable:w.a,VDialog:C.a,VIcon:f.a,VImg:E.a,VListItemContent:D.a,VListItemTitle:D.c,VRow:m.a,VTextField:b.a,VTextarea:_.a})},126:function(e,t,i){"use strict";var s=i(60),o=i.n(s),n=i(70),a=i(129),d=i(85);function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var l={props:["album","creator"],created:function(){var e=this;axios.get("/api/prices").then((function(t){e.previousPrices=e.previousPrices=t.data}))},mixins:[i(23).a],components:{draggable:o.a,editSongDialog:n.a,AttachAssetDialog:d.a,attachSongDialog:a.a},computed:{isShowing:function(){var e=this;return function(t){return e.editedAlbum.songs[e.editedAlbum.songs.findIndex((function(e){return e.id===t}))].isShowing}},canBeProduct:function(){return"admin"===this.creator||"artist"===this.creator}},data:function(){return{editedAlbum:JSON.parse(JSON.stringify(this.album)),firstCopy:this.album,artistsFocused:!1,editDialog:!1,artistsComp:!0,songToBeDeleted:null,defaultCoverPath:"/storage/defaults/images/album_cover.png",deleteSongConfirmationDialog:!1,editingSong:null,artists:[],addSong:!1,dateMenu:!1,isLoading:!1,errors:{},licenseDialog:!1,selectedLicense:0,editedLicense:{},licenses:(this.album.product?this.album.product.prices:[])||[],importFromSpotifyDialog:!1,progress:null,songTableHeaders:[{text:""},{text:this.$t("#"),sortable:!0},{text:this.$t("Cover"),align:"start",sortable:!1,value:"cover"},{text:this.$t("Title"),value:"title"},{text:this.$t("Artists"),value:"artists",align:"center"},{text:this.$t("Plays"),value:"plays",align:"center"},{text:this.$t("Likes"),value:"likes",align:"center"},{text:this.$t("Created At"),value:"created_at"},{text:this.$t("Operations"),value:"operations",align:"center"}]}},watch:{dateMenu:function(e){var t=this;e&&setTimeout((function(){return t.$refs.picker.activePicker="YEAR"}))},importFromSpotifyDialog:function(){var e=this;this.artistsComp=!1,setTimeout((function(){e.artistsComp=!0}),10)}},beforeDestroy:function(){this.$emit("beforeDestroy")},methods:{addLicense:function(){var e=this;if(this.selectedLicense)var t=this.previousPrices.find((function(t){return t.id===e.selectedLicense}));else{if(!this.editedLicense.name)return this.$notify({group:"foo",type:"error",title:this.$t("Oops!"),text:this.$t("Please provide a name for the license.")});if(!this.editedLicense.amount||isNaN(this.editedLicense.amount))return this.$notify({group:"foo",type:"error",title:this.$t("Oops!"),text:this.$t("Please enter a correct amount.")});if(!isNaN(this.editedLicense.amount)&&this.editedLicense.amount<50)return this.$notify({group:"foo",type:"error",title:this.$t("Oops!"),text:this.$t("Please enter a value above 50 on the amount (minimum charge for Stripe)")});t=this.editedLicense}this.licenses.push(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){c(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t)),this.licenseDialog=!1,this.selectedLicense=0,this.editedLicense={},this.$notify({group:"foo",type:"success",title:this.$t("Added"),text:this.$t("License added!")})},closeWindow:function(){var e=this,t=!1;JSON.stringify(this.editedAlbum)!=JSON.stringify(this.firstCopy)&&(t=!0),t?this.$confirm({message:"".concat(this.$t("Are you sure you wanna quit without saving the changes?")),button:{no:this.$t("Cancel"),yes:this.$t("Discard")},callback:function(t){t&&(e.editedAlbum.title=e.firstCopy.title,e.editedAlbum.artist=e.firstCopy.artist,e.editedAlbum.cover=e.firstCopy.cover,e.editedAlbum.release_date=e.firstCopy.release_date,e.$emit("close"))}}):this.$emit("close")},updateProgress:function(e,t){var i=this.editedAlbum.songs.findIndex((function(e){return e.id===t}));this.$set(this.editedAlbum.songs[i],"progress",e)},addSpotifyData:function(e){this.editedAlbum.cover=e.cover,this.editedAlbum.title=e.title,this.editedAlbum.artists=e.artists,this.importFromSpotifyDialog=!1},saveReleaseDate:function(e){this.$refs.menu.save(e)},cancelUpload:function(e){var t=this.editedAlbum.songs.findIndex((function(t){return t.id===e}));this.editedAlbum.songs[t].requestSource.cancel(),this.editSong(e)},sleepSong:function(e){this.editDialog=!1;var t=this.editedAlbum.songs.findIndex((function(t){return t.id===e}));this.$set(this.editedAlbum.songs[t],"isShowing",!1)},goodByeSong:function(){var e=this,t=this.editedAlbum.songs.findIndex((function(t){return t.id===e.songToBeDeleted}));this.editedAlbum.songs[t].requestSource&&this.editedAlbum.songs[t].requestSource.cancel(),this.deleteSongConfirmationDialog=!1,this.editedAlbum.songs.splice(t,1),axios.delete("/api/songs/"+this.songToBeDeleted).then((function(){e.$notify({group:"foo",type:"success",title:e.$t("Deleted"),text:e.$t("Song")+" "+e.$t("Deleted")+"."})})).catch((function(e){})),this.songToBeDeleted=null},wakeSong:function(e){this.editDialog=!0;var t=this.editedAlbum.songs.findIndex((function(t){return t.id===e}));this.$set(this.editedAlbum.songs[t],"isShowing",!0)},hideAllsongs:function(){for(var e=0;e<this.editedAlbum.songs.length;e++)this.$set(this.editedAlbum.songs[e],"isShowing",!1);this.editDialog=!1},imageReady:function(e){this.editedAlbum.cover=e},deleteSong:function(e){this.songToBeDeleted=e,this.deleteSongConfirmationDialog=!0},editSong:function(e){"new"===e?(this.editedAlbum.songs.unshift({id:Math.floor(95e3*Math.random()+1e5),new:!0,genres:[],isActive:!0,public:!0,isShowing:!0,artists:this.editedAlbum.artists,cover:this.editedAlbum.cover.data?this.editedAlbum.cover.data:this.editedAlbum.cover,nb_likes:0,nb_plays:0,source_format:"file"}),this.editDialog=!0):(this.editedAlbum.songs[this.editedAlbum.songs.findIndex((function(t){return t.id===e}))].isActive=!0,this.editedAlbum.songs[this.editedAlbum.songs.findIndex((function(t){return t.id===e}))].isShowing=!0,this.editDialog=!0)},closeSong:function(e){var t=this.editedAlbum.songs.findIndex((function(t){return t.id===e}));this.editedAlbum.songs[t].isShowing&&(this.editDialog=!1),this.$set(this.editedAlbum.songs[t],"isShowing",!1),this.$set(this.editedAlbum.songs[t],"isActive",!1),this.$forceUpdate()},songEdited:function(e){var t=this.editedAlbum.songs.findIndex((function(t){return t.id===e}));this.$set(this.editedAlbum.songs[t],"progress",0),this.$set(this.editedAlbum.songs[t],"isActive",!1),this.$notify({group:"foo",type:"success",title:this.$t("Saved"),text:this.$t("Song")+" "+this.$t("Updated")+"."})},songCreated:function(){this.saveAlbum(),this.$notify({group:"foo",type:"success",title:this.$t("Created"),text:this.$t("Song")+" "+this.$t("Created")+"."})},fetchArtists:function(e,t){var i=this;e&&(t(!0),axios.get("/api/match-artists/"+e).then((function(e){return i.artists=e.data.map((function(e){return{id:e.id,displayname:e.displayname,avatar:e.avatar}}))})).finally((function(){return t(!1)})))},attachSong:function(e){var t=this;axios.post("/api/attach-to-album",{album_id:this.album.id,song_id:e.id}).then((function(){t.$notify({group:"foo",type:"success",title:t.$t("Added"),text:t.$t("Song attached to album.")}),t.editedAlbum.songs.push(e),t.addSong=!1}))},detachSong:function(e){var t=this;axios.post("/api/detach-from-album",{album_id:this.album.id,song_id:e}).then((function(){t.$notify({group:"foo",type:"success",title:t.$t("Added"),text:t.$t("Song detached from album!")});var i=t.editedAlbum.songs.findIndex((function(t){return t.id===e}));t.editedAlbum.songs.splice(i,1)}))},saveAlbum:function(e){var t=this,i=new FormData;if(this.isLoading=!0,this.editedAlbum.cover&&this.editedAlbum.cover.data?i.append("cover",this.editedAlbum.cover.data,this.editedAlbum.cover.title):this.editedAlbum.cover&&!this.editedAlbum.cover.data?i.append("cover",this.editedAlbum.cover):i.append("cover",this.defaultCoverPath),this.editedAlbum.title&&i.append("title",this.editedAlbum.title),this.editedAlbum.spotify_link&&i.append("spotify_link",this.editedAlbum.title),this.editedAlbum.youtube_link&&i.append("youtube_link",this.editedAlbum.youtube_link),this.editedAlbum.soundcloud_link&&i.append("soundcloud_link",this.editedAlbum.soundcloud_link),this.editedAlbum.itunes_link&&i.append("itunes_link",this.editedAlbum.itunes_link),this.editedAlbum.deezer_link&&i.append("deezer_link",this.editedAlbum.deezer_link),this.editedAlbum.release_date&&i.append("release_date",this.editedAlbum.release_date),this.editedAlbum.songs&&i.append("songs",JSON.stringify(this.editedAlbum.songs.map((function(e){return e.id})))),this.editedAlbum.isExclusive?i.append("isExclusive",1):i.append("isExclusive",0),this.editedAlbum.isExplicit?i.append("isExplicit",1):i.append("isExplicit",0),this.editedAlbum.isProduct){if(i.append("isProduct",1),!this.licenses.length)return this.isLoading=!1,this.$notify({group:"foo",type:"error",title:this.$t("Error"),text:this.$t("Please add atleast one license/price")});i.append("licenses",JSON.stringify(this.licenses))}else i.append("isProduct",0);this.editedAlbum.artists.length&&i.append("artists",JSON.stringify(this.editedAlbum.artists)),i.append("created_by",this.creator),this.editedAlbum.new?axios.post("/api/albums",i,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){var i=Math.floor(100*e.loaded/e.total);t.progress=i}}).then((function(){t.$emit("created"),t.isLoading=!1})).catch((function(e){t.progress=0,t.isLoading=!1,t.errors=e.response.data.errors})):(i.append("album_id",this.editedAlbum.id),i.append("_method","PUT"),axios.post("/api/albums/"+this.editedAlbum.id,i,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){var i=Math.floor(100*e.loaded/e.total);t.progress=i}}).then((function(){e&&t.$emit("updated"),t.isLoading=!1})).catch((function(e){t.progress=0,t.isLoading=!1})))}}},u=(i(332),i(0)),p=i(1),h=i.n(p),v=i(81),f=i(105),m=i(3),g=i(559),b=i(860),_=i(872),y=i(619),$=i(564),x=i(152),k=i(75),S=i(273),A=i(157),P=i(112),w=i(558),C=i(68),E=i(554),D=i(765),L=i(41),V=Object(u.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("edit-dialog",{attrs:{loading:e.isLoading,fullscreen:!e.editedAlbum.new,editing:"Album"},on:{callToAction:function(t){return e.saveAlbum(!0)},cancel:e.closeWindow},scopedSlots:e._u([{key:"header-actions",fn:function(){return[e.$store.getters.getSettings.provider_spotify?i("v-btn",{attrs:{small:"",color:"#1DB954",dark:""},on:{click:function(t){e.importFromSpotifyDialog=!0}}},[i("v-icon",{attrs:{left:""}},[e._v("$vuetify.icons.spotify")]),e._v("\n            "+e._s(e.$t("From Spotify"))+"\n        ")],1):e._e()]},proxy:!0},{key:"body",fn:function(){return[i("v-container",[i("v-row",[i("v-col",{attrs:{cols:"auto"}},[i("upload-image",{attrs:{id:"album"+e.editedAlbum.id,source:e.editedAlbum.cover||e.defaultCoverPath},on:{imageReady:function(t){return e.imageReady(t)}}})],1),e._v(" "),i("v-col",[i("v-container",[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-text-field",{attrs:{label:e.$t("Title"),outlined:"","hide-details":""},model:{value:e.editedAlbum.title,callback:function(t){e.$set(e.editedAlbum,"title",t)},expression:"editedAlbum.title"}})],1),e._v(" "),"admin"===e.creator?i("v-col",{attrs:{cols:"12"}},[e.artistsComp?i("select-artists",{attrs:{artists:e.editedAlbum.artists,multiple:!0},on:{artists:function(t){e.editedAlbum.artists=t}}}):e._e()],1):e._e(),e._v(" "),i("v-col",{attrs:{cols:"12"}},[i("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,o=t.attrs;return[i("v-text-field",e._g(e._b({attrs:{label:e.$t("Release Date"),readonly:"",outlined:"","hide-details":""},model:{value:e.editedAlbum.release_date,callback:function(t){e.$set(e.editedAlbum,"release_date",t)},expression:"\n                                                editedAlbum.release_date\n                                            "}},"v-text-field",o,!1),s))]}}]),model:{value:e.dateMenu,callback:function(t){e.dateMenu=t},expression:"dateMenu"}},[e._v(" "),i("v-date-picker",{ref:"picker",attrs:{max:(new Date).toISOString().substr(0,10),min:"1950-01-01"},on:{change:e.saveReleaseDate},model:{value:e.editedAlbum.release_date,callback:function(t){e.$set(e.editedAlbum,"release_date",t)},expression:"editedAlbum.release_date"}})],1)],1)],1)],1)],1)],1),e._v(" "),i("v-row",[i("v-col",{attrs:{cols:"12",sm:"6"}},[i("v-switch",{attrs:{label:e.$t("Exclusive")},model:{value:e.editedAlbum.isExclusive,callback:function(t){e.$set(e.editedAlbum,"isExclusive",t)},expression:"editedAlbum.isExclusive"}})],1),e._v(" "),i("v-col",{attrs:{cols:"12",sm:"6"}},[i("v-switch",{attrs:{label:e.$t("Explicit")},model:{value:e.editedAlbum.isExplicit,callback:function(t){e.$set(e.editedAlbum,"isExplicit",t)},expression:"editedAlbum.isExplicit"}})],1)],1),e._v(" "),i("v-row",[i("edit-external-links",{attrs:{item:e.editedAlbum},on:{spotify_link:function(t){e.editedAlbum.spotify_link=t},youtube_link:function(t){e.editedAlbum.youtube_link=t},soundcloud_link:function(t){e.editedAlbum.soundcloud_link=t},itunes_link:function(t){e.editedAlbum.itunes_link=t},deezer_link:function(t){e.editedAlbum.deezer_link=t}}})],1),e._v(" "),e.$store.getters.getSettings.enable_selling&&e.canBeProduct?i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("div",{staticClass:"title"},[e._v(e._s(e.$t("Product")))]),e._v(" "),i("v-divider")],1),e._v(" "),i("v-col",[i("v-switch",{attrs:{label:"Provide as product"+(e.$store.getters.getSettings.enableBilling?"":" (Enable Billing first)"),disabled:!e.$store.getters.getSettings.enableBilling},model:{value:e.editedAlbum.isProduct,callback:function(t){e.$set(e.editedAlbum,"isProduct",t)},expression:"editedAlbum.isProduct"}})],1),e._v(" "),e.editedAlbum.isProduct?i("v-col",{attrs:{cols:"12"}},[i("div",{staticClass:"d-flex justify-space-between"},[i("div",{staticClass:"title"},[e._v(e._s(e.$t("Licenses")))]),e._v(" "),i("div"),e._v(" "),i("v-btn",{staticClass:"primary",attrs:{small:""},on:{click:function(t){e.licenseDialog=!0}}},[e._v(e._s(e.$t("Add License")))])],1),e._v(" "),i("div",{staticClass:"py-3"},[i("v-divider")],1),e._v(" "),[i("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[i("thead",[i("tr",[i("th",{staticClass:"text-left"},[e._v("\n                                            "+e._s(e.$t("Name"))+"\n                                        ")]),e._v(" "),i("th",{staticClass:"text-left"},[e._v("\n                                            "+e._s(e.$t("Price"))+"\n                                        ")]),e._v(" "),i("th",{staticClass:"text-left"},[e._v("\n                                            "+e._s(e.$t("Description"))+"\n                                        ")]),e._v(" "),i("th",{staticClass:"text-left"},[e._v("\n                                            "+e._s(e.$t("Delete"))+"\n                                        ")])])]),e._v(" "),i("tbody",e._l(e.licenses,(function(t,s){return i("tr",{key:s},[i("td",[e._v(e._s(t.name))]),e._v(" "),i("td",[e._v("\n                                            "+e._s(e.price(t.amount)+e.defaultCurrency.symbol)+"\n                                        ")]),e._v(" "),i("td",[e._v(e._s(t.description))]),e._v(" "),i("td",[i("v-btn",{attrs:{"x-small":"",fab:"",dark:"",color:"error"},on:{click:function(t){return e.licenses.splice(s,1)}}},[i("v-icon",[e._v("$vuetify.icons.delete")])],1)],1)])})),0)]},proxy:!0}],null,!1,100354717)})]],2):e._e()],1):e._e()],1),e._v(" "),e.editedAlbum.new?e._e():i("v-container",{staticClass:"songs pt-5"},[i("div",{staticClass:"songs-wrapper"},[i("v-card",{attrs:{outlined:""}},[i("v-card-title",[i("v-icon",{attrs:{color:"primary","x-large":""}},[e._v("$vuetify.icons.music-note")]),e._v(" "),i("div",{staticClass:"large-icon-text tertiary--text"},[e._v("\n                            "+e._s(e.$t("Songs"))+"\n                        ")]),e._v(" "),i("v-btn",{staticClass:"mx-2 ml-3",attrs:{dark:"",small:"",color:"primary"},on:{click:function(t){return e.editSong("new")}}},[i("v-icon",{attrs:{dark:""}},[e._v("$vuetify.icons.plus")]),e._v("\n                            "+e._s(e.$t("New"))+"\n                        ")],1),e._v(" "),i("v-btn",{staticClass:"mx-2",attrs:{dark:"",small:"",color:"secondary"},on:{click:function(t){e.addSong=!0}}},[i("v-icon",[e._v("$vuetify.icons.link")]),e._v("\n                            "+e._s(e.$t("Attach"))+"\n                        ")],1)],1),e._v(" "),i("v-data-table",{attrs:{"no-data-text":e.$t("No data available"),"loading-text":e.$t("Fetching data")+"...",headers:e.songTableHeaders,items:e.editedAlbum.songs||[],"items-per-page":15,"hide-default-footer":"",loading:!e.editedAlbum.songs},scopedSlots:e._u([{key:"body",fn:function(t){return[e.editedAlbum.songs.length?i("draggable",{attrs:{tag:"tbody"},model:{value:e.editedAlbum.songs,callback:function(t){e.$set(e.editedAlbum,"songs",t)},expression:"editedAlbum.songs"}},e._l(e.editedAlbum.songs,(function(t,s){return i("tr",{key:s},[i("td",[i("v-icon",{staticClass:"page__grab-icon",attrs:{small:""}},[e._v("\n                                            mdi-arrow-all\n                                        ")])],1),e._v(" "),i("td",[e._v(e._s(s+1))]),e._v(" "),i("td",[i("div",{staticClass:"img-container py-2"},[i("v-img",{staticClass:"user-avatar song-cover",attrs:{src:t.cover.image||t.cover,alt:t.title,width:"50",height:"50"}},[null!=t.progress&&t.progress<100?i("div",{staticClass:"upload-percentage"},[i("div",{staticClass:"content-text"},[t.progress<99?[e._v("\n                                                            "+e._s(t.progress)+"%\n                                                        ")]:[i("v-progress-circular",{attrs:{size:15,width:3,color:"grey",indeterminate:""}})]],2)]):e._e()])],1)]),e._v(" "),i("td",[i("router-link",{staticClass:"router-link",attrs:{to:{name:"song",params:{id:t.id}},target:"_blank"}},[e._v("\n                                            "+e._s(t.title)+"\n                                        ")])],1),e._v(" "),i("td",[e._v("\n                                        "+e._s(e.getArtists(t.artists))+"\n                                    ")]),e._v(" "),i("td",{staticClass:"text-center"},[e._v("\n                                        "+e._s(t.nb_plays)+"\n                                    ")]),e._v(" "),i("td",{staticClass:"text-center"},[e._v("\n                                        "+e._s(t.nb_likes)+"\n                                    ")]),e._v(" "),i("td",[e._v("\n                                        "+e._s(e.moment(t.created_at).format("ll"))+"\n                                    ")]),e._v(" "),i("td",[i("v-btn",{staticClass:"mx-2",attrs:{"x-small":"",fab:"",dark:"",color:"info"},on:{click:function(i){return e.editSong(t.id)}}},[i("v-icon",{attrs:{dark:""}},[e._v("$vuetify.icons.pencil")])],1),e._v(" "),i("v-btn",{staticClass:"mx-2",attrs:{"x-small":"",fab:"",dark:"",title:e.$t("Detach song from this album"),color:"secondary"},on:{click:function(i){return e.detachSong(t.id)}}},[i("v-icon",{attrs:{dark:""}},[e._v("$vuetify.icons.link-off")])],1),e._v(" "),i("v-btn",{staticClass:"mx-2",attrs:{"x-small":"",fab:"",title:e.$t("Delete Song"),dark:"",color:"error"},on:{click:function(i){return e.deleteSong(t.id)}}},[i("v-icon",[e._v("$vuetify.icons.delete")])],1)],1)])})),0):i("empty-page",{staticClass:"empty-songs",attrs:{headline:e.$t("No Songs!"),sub:e.$t("This album is empty.")}})]}}],null,!1,913445694)})],1)],1)])]},proxy:!0},{key:"dialogs",fn:function(){return[i("v-dialog",{attrs:{persistent:"",scrollable:"","max-width":"950"},on:{"click:outside":e.hideAllsongs},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[e._l(e.editedAlbum.songs,(function(t){return[t.isActive?i("edit-song-dialog",{directives:[{name:"show",rawName:"v-show",value:e.isShowing(t.id),expression:"isShowing(song.id)"}],key:t.id,attrs:{song:t,uploader:e.creator,album_id:e.editedAlbum.id},on:{updated:function(i){return e.songEdited(t.id)},progress:function(i){return e.updateProgress(i,t.id)},created:e.songCreated,close:function(i){return e.closeSong(t.id)},sleep:function(i){return e.sleepSong(t.id)},wake:function(i){return e.wakeSong(t.id)}}}):e._e()]}))],2),e._v(" "),i("v-dialog",{attrs:{"max-width":"400"},model:{value:e.deleteSongConfirmationDialog,callback:function(t){e.deleteSongConfirmationDialog=t},expression:"deleteSongConfirmationDialog"}},[i("v-card",[i("div",{staticClass:"p-2"},[e._v("\n                    "+e._s(e.$t("Are you sure you wanna delete this")+e.$t("Song")+"?")+"\n                ")]),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{color:"error",text:""},on:{click:e.goodByeSong}},[e._v(e._s(e.$t("Delete")))]),e._v(" "),i("v-btn",{attrs:{text:""},on:{click:function(t){e.deleteSongConfirmationDialog=!1}}},[e._v(e._s(e.$t("Cancel")))])],1)],1)],1),e._v(" "),i("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.addSong,callback:function(t){e.addSong=t},expression:"addSong"}},[e.addSong?i("attach-song-dialog",{attrs:{creator:e.creator},on:{songSelected:function(t){return e.attachSong(t)}}}):e._e()],1),e._v(" "),e.canBeProduct&&e.licenseDialog?i("v-dialog",{attrs:{"max-width":"500"},model:{value:e.licenseDialog,callback:function(t){e.licenseDialog=t},expression:"licenseDialog"}},[i("edit-dialog",{attrs:{callToActionText:"Add",loading:!1,title:e.$t("Add License")},on:{callToAction:function(t){return e.addLicense(t)},cancel:function(t){e.licenseDialog=!1,e.selectedLicense=null}},scopedSlots:e._u([{key:"body",fn:function(){return[i("v-container",[i("v-select",{attrs:{items:e.previousPrices,"item-value":"id","item-text":"name",label:"Choose License"},scopedSlots:e._u([{key:"item",fn:function(t){var i=t.item;return[e._v("\n                                "+e._s(i.name)+"\n                                "+e._s(e.price(i.amount)+" "+i.currency_symbol)+"\n                            ")]}},{key:"selection",fn:function(t){var i=t.item;return[e._v("\n                                "+e._s(i.name)+"\n                                "+e._s(e.price(i.amount)+" "+i.currency_symbol)+"\n                            ")]}}],null,!1,2705768188),model:{value:e.selectedLicense,callback:function(t){e.selectedLicense=t},expression:"selectedLicense"}}),e._v(" "),e.selectedLicense?e._e():[i("v-text-field",{attrs:{label:e.$t("Name")},model:{value:e.editedLicense.name,callback:function(t){e.$set(e.editedLicense,"name",t)},expression:"editedLicense.name"}}),e._v(" "),i("v-text-field",{attrs:{label:e.$t("Description")},model:{value:e.editedLicense.description,callback:function(t){e.$set(e.editedLicense,"description",t)},expression:"editedLicense.description"}}),e._v(" "),i("div",{staticClass:"d-flex align-center"},[i("v-text-field",{staticClass:"pr-2",attrs:{label:e.$t("Amount"),hint:"Important: the amount should be in cents ( 1$ = 100 )",value:0},model:{value:e.editedLicense.amount,callback:function(t){e.$set(e.editedLicense,"amount",t)},expression:"editedLicense.amount"}}),e._v(" "),i("div",[i("div",{staticClass:"plan__price"},[i("div",{staticClass:"plan__price__currency"},[e._v("\n                                            "+e._s(e.defaultCurrency.symbol)+"\n                                        ")]),e._v(" "),i("div",{staticClass:"plan__price__amount"},[e._v("\n                                            "+e._s(e.price(e.editedLicense.amount))+"\n                                        ")])])])],1)]],2)]},proxy:!0}],null,!1,2046711004)})],1):e._e(),e._v(" "),i("v-dialog",{attrs:{"max-width":"500"},model:{value:e.importFromSpotifyDialog,callback:function(t){e.importFromSpotifyDialog=t},expression:"importFromSpotifyDialog"}},[e.importFromSpotifyDialog?i("attach-asset-dialog",{staticClass:"p-3",attrs:{type:"album",engine:"spotify"},on:{asset:function(t){return e.addSpotifyData(t)}}}):e._e()],1)]},proxy:!0}])})}),[],!1,null,"132776eb",null);t.a=V.exports;h()(V,{VBtn:v.a,VCard:f.a,VCardActions:m.a,VCardTitle:m.c,VCol:g.a,VContainer:b.a,VDataTable:_.a,VDatePicker:y.a,VDialog:$.a,VDivider:x.a,VIcon:k.a,VImg:S.a,VMenu:A.a,VProgressCircular:P.a,VRow:w.a,VSelect:C.a,VSimpleTable:E.a,VSwitch:D.a,VTextField:L.a})},128:function(e,t,i){"use strict";var s={props:["users","multiple"],data:function(){return{searchedUsers:JSON.parse(JSON.stringify(this.users)),selectedUsers:JSON.parse(JSON.stringify(this.users)),isSearchUserLoading:!1,searchUsers:null}},watch:{searchUsers:function(e){var t=this;this.isSearchUserLoading||(this.isSearchUserLoading=!0,axios.get("/api/match-users?query="+e).then((function(e){e.data.forEach((function(e){t.searchedUsers.push(e)}))})).catch().finally((function(){return t.isSearchUserLoading=!1})))},selectedUsers:function(e){this.$emit("users",e)}},methods:{pushUser:function(e){this.selectedUsers.push(e)},remove:function(e){if(this.multiple){var t=this.selectedUsers.findIndex((function(t){return t.id===e}));t>=0&&this.selectedUsers.splice(t,1)}else this.selectedUsers=null}}},o=i(0),n=i(1),a=i.n(n),d=i(870),r=i(150),c=i(140),l=i(75),u=i(273),p=i(155),h=i(10),v=Object(o.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-autocomplete",{attrs:{items:e.searchedUsers,loading:e.isSearchUserLoading,"search-input":e.searchUsers,label:e.multiple?e.$t("Users"):e.$t("User"),"item-text":"name","return-object":"","hide-details":"",placeholder:e.$t("Start typing to Search"),multiple:e.multiple,outlined:""},on:{"update:searchInput":function(t){e.searchUsers=t},"update:search-input":function(t){e.searchUsers=t}},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.item;return[i("v-chip",{attrs:{close:""},on:{"click:close":function(t){return e.remove(s.id)}}},[i("v-avatar",{attrs:{left:""}},[s.avatar?i("v-img",{attrs:{src:s.avatar}}):i("v-icon",[e._v("$vuetify.icons.account-music")])],1),e._v("\n            "+e._s(s.name+"("+s.email+")")+"\n        ")],1)]}},{key:"item",fn:function(t){var s=t.item;return[[i("v-list-item-avatar",[s.avatar?i("v-img",{attrs:{src:s.avatar}}):i("v-icon",[e._v("$vuetify.icons.account-music")])],1),e._v(" "),i("v-list-item-content",[i("v-list-item-title",{domProps:{innerHTML:e._s(s.name)}})],1)]]}}]),model:{value:e.selectedUsers,callback:function(t){e.selectedUsers=t},expression:"selectedUsers"}})}),[],!1,null,null,null);t.a=v.exports;a()(v,{VAutocomplete:d.a,VAvatar:r.a,VChip:c.a,VIcon:l.a,VImg:u.a,VListItemAvatar:p.a,VListItemContent:h.a,VListItemTitle:h.c})},129:function(e,t,i){"use strict";var s={props:["creator"],data:function(){return{selectedSong:null,searchedSongs:[],isSearchSongLoading:!1,searchSongs:null}},watch:{searchSongs:function(e){var t=this;this.isSearchSongLoading||(this.isSearchSongLoading=!0,axios.get("/api/"+("artist"===this.creator?"artist/match-songs":"match-songs")+"?query="+e).then((function(e){t.searchedSongs=e.data})).catch().finally((function(){return t.isSearchSongLoading=!1})))}}},o=i(0),n=i(1),a=i.n(n),d=i(870),r=i(81),c=i(105),l=i(559),u=i(860),p=i(273),h=i(558),v=Object(o.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("v-container",[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-autocomplete",{attrs:{items:e.searchedSongs,loading:e.isSearchSongLoading,"search-input":e.searchSongs,"item-text":"title",label:e.$t("Search Song"),placeholder:e.$t("Start typing to search"),"return-object":"","prepend-icon":"mdi-music-note"},on:{"update:searchInput":function(t){e.searchSongs=t},"update:search-input":function(t){e.searchSongs=t}},scopedSlots:e._u([{key:"item",fn:function(t){var s=t.item;return[i("div",{staticClass:"item py-2"},[i("div",{staticClass:"list-item-cover"},[i("v-img",{staticClass:"img mr-2",attrs:{src:s.cover,width:"50","aspect-ratio":"1"},scopedSlots:e._u([{key:"placeholder",fn:function(){return[i("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[i("content-placeholders",{staticStyle:{width:"100%"},attrs:{rounded:!0}},[i("content-placeholders-img")],1)],1)]},proxy:!0}],null,!0)})],1)]),e._v("\n                        "+e._s(s.title)+"\n                    ")]}}]),model:{value:e.selectedSong,callback:function(t){e.selectedSong=t},expression:"selectedSong"}})],1),e._v(" "),i("v-col",{attrs:{cols:"12"}},[i("v-btn",{staticClass:"success",attrs:{block:"",disabled:!e.selectedSong},on:{click:function(t){e.$emit("songSelected",e.selectedSong),e.searchedSongs=[]}}},[e._v(e._s(e.$t("Add")))])],1)],1)],1)],1)}),[],!1,null,null,null);t.a=v.exports;a()(v,{VAutocomplete:d.a,VBtn:r.a,VCard:c.a,VCol:l.a,VContainer:u.a,VImg:p.a,VRow:h.a})},185:function(e,t,i){var s=i(333);"string"==typeof s&&(s=[[e.i,s,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i(6)(s,o);s.locals&&(e.exports=s.locals)},332:function(e,t,i){"use strict";i(185)},333:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,".selected-artist>.artist-name[data-v-132776eb]{color:var(--light-theme-text-color)}.v-application.theme--dark .selected-artist>.artist-name[data-v-132776eb]{color:var(--dark-theme-text-color)}",""])}}]);