(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{700:function(t,s,i){"use strict";i.r(s);var e=i(261);window.Pusher=i(456);var n={created:function(){var t=this;this.$store.getters.getSettings.enableRealtime&&(window.Echo=new e.a({auth:{headers:{Authorization:"Bearer "+this.$store.getters.getToken}},authEndpoint:"/api/broadcasting/auth",broadcaster:"pusher",key:this.$store.getters.getSettings.pusherKey,cluster:this.$store.getters.getSettings.pusherCluster}),window.Echo.channel("Chat").listen("HearingEvent",(function(s){var i=t.friends.find((function(t){return t.id==s.user_id}));i&&(i.is_playing=s.is_playing)})),window.Echo.join("Chat").here((function(s){s.forEach((function(s){s.id==t.$store.getters.getUser.id&&(t.$store.getters.getCurrentAudio||t.$store.dispatch("endPlay"))})),t.friends.forEach((function(t){s.forEach((function(s){s.id==t.id&&(t.online=!0)}))}))})).joining((function(s){t.friends.forEach((function(t){return s.id==t.id?t.online=!0:""}))})).leaving((function(s){t.friends.forEach((function(t){return s.id==t.id?(t.online=!1,t.is_playing=null):""}))})))},data:function(){return{focused:null}},computed:{friends:function(){return this.$store.getters.getFriends}},methods:{unfriend:function(t){var s=this;this.$confirm({message:"".concat(this.$t("Are you sure you wanna unfriend"),"  ").concat(t.name,'?")}'),button:{no:this.$t("No"),yes:this.$t("Yes")},callback:function(i){i&&s.$store.dispatch("removeFriend",t.id).then((function(){return s.$store.dispatch("fetchFriends")}))}})},listenToFriendPlayer:function(t){t.content_item.podcast?this.$store.dispatch("playEpisode",{episode:t.content_item,reset:!0}):this.$store.dispatch("playSong",{song:t.content_item,reset:!0})},whatIsHeListeningTo:function(t){var s=t.is_playing;return this.$t("Listening to")+" "+s.title+(s.artists?" "+this.$t("by")+" "+this.getArtists(s.artists):"")+(s.parent_title?" "+this.$t("from")+" "+s.parent_title+("song"===s.content_type?" "+this.$t("album"):"episode"===s.content_type?" "+this.$t("podacst"):""):"")}}},a=i(0),r=i(1),o=i.n(r),c=i(75),l=Object(a.a)(n,(function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"friends-container"},[i("div",{staticClass:"friends-container__main"},[i("div",{staticClass:"friends-container__title"},[t._v("\n            "+t._s(t.$t("Friends"))+"\n        ")]),t._v(" "),t.friends.length?i("div",{staticClass:"friends-list"},[i("ul",t._l(t.friends,(function(s){return i("li",{key:s.id},[i("div",{staticClass:"top-side"},[i("div",{staticClass:"avatar user-avatar"},[s.badge?i("div",{staticClass:"badge"},[i("v-icon",{attrs:{color:"primary"}},[t._v("$vuetify.icons."+t._s(s.badge))])],1):t._e(),t._v(" "),i("img",{attrs:{src:s.avatar,alt:""}}),t._v(" "),s.online?i("div",{staticClass:"status status-online"}):i("div",{staticClass:"status status-offline"})]),t._v(" "),i("div",{staticClass:"infos"},[i("div",{staticClass:"name-container"},[i("div",{staticClass:"name max-1-lines"},[t._v("\n                                    "+t._s(s.name)+"\n                                ")])]),t._v(" "),i("div",{staticClass:"activity-container"},[i("div",{staticClass:"hiding-box-left"}),t._v(" "),s.is_playing&&s.online?i("div",{staticClass:"activity"},[t._v("\n                                    "+t._s(t.whatIsHeListeningTo(s))+"\n                                ")]):t._e(),t._v(" "),i("div",{staticClass:"hiding-box-right"})])])]),t._v(" "),i("div",{staticClass:"bottom-side"},[i("div",{staticClass:"options"},[i("div",{staticClass:"profile",on:{click:function(i){return t.$router.push({name:"profile",params:{id:s.id}})}}},[t._m(0,!0),t._v(" "),i("div",{staticClass:"option-title"},[t._v("\n                                    "+t._s(t.$t("Profile"))+"\n                                ")])]),t._v(" "),t.$store.getters.getSettings.enableRealtime&&t.$store.getters.getSettings.enableChat&&t.hasPermission("Chat with friends")?i("div",{staticClass:"chat",on:{click:function(i){return t.$store.commit("setOpenChatWith",s.id)}}},[t._m(1,!0),t._v(" "),i("div",{staticClass:"option-title"},[t._v("\n                                    "+t._s(t.$t("Chat"))+"\n                                ")])]):t._e(),t._v(" "),s.is_playing&&s.online&&t.hasPermission("Listen with friends")?i("button",{staticClass:"hear",on:{click:function(i){return t.listenToFriendPlayer(s.is_playing)}}},[t._m(2,!0),t._v(" "),i("div",{staticClass:"option-title"},[t._v("\n                                    "+t._s(t.$t("Listen"))+"\n                                ")]),t._v(" "),i("div",{staticClass:"overlay"})]):t._e(),t._v(" "),i("div",{staticClass:"unfollow",on:{click:function(i){return t.unfriend(s)}}},[t._m(3,!0),t._v(" "),i("div",{staticClass:"option-title"},[t._v("\n                                    "+t._s(t.$t("Unfriend"))+"\n                                ")])])])])])})),0)]):i("empty-page",{attrs:{id:"no-friends",headline:t.$t("No Friends!"),sub:t.$t("You seem to be having no friends. Add some!")}})],1)])}),[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"icon"},[s("img",{staticClass:"svg-image",attrs:{src:"/svg/user-circle.svg",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"icon"},[s("img",{staticClass:"svg-image",attrs:{src:"/svg/speech-bubble-line.svg",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"icon"},[s("img",{staticClass:"svg-image",attrs:{src:"/svg/headphone.svg",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"icon"},[s("img",{staticClass:"svg-image",attrs:{src:"/svg/male-remove.svg",alt:""}})])}],!1,null,null,null);s.default=l.exports;o()(l,{VIcon:c.a})}}]);