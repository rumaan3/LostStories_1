/*! For license information please see 9feb387b772db53c61c9.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{117:function(e,t,i){const s=i(145),a=i(231),r=i(232),n=i(453);e.exports=class{constructor({metadataTypes:e=["icy"],...t}={}){const i=e.includes("icy"),o=e.includes("ogg");this._metadataParser=i&&o?new n(t):o?new r(t):i?new a(t):new s(t)}static parseIcyMetadata(e){return a.parseIcyMetadata(e)}get icyMetaInt(){return this._metadataParser.icyMetaInt}*iterator(e){yield*this._metadataParser.iterator(e)}readAll(e){this._metadataParser.readAll(e)}async*asyncIterator(e){return yield*this._metadataParser.asyncIterator(e)}async asyncReadAll(e){return this._metadataParser.asyncReadAll(e)}}},145:function(e,t,i){const s=i(230).TextDecoder||TextDecoder,a=i(452),r=()=>{};class n{constructor(e){this._remainingData=0,this._currentPosition=0,this._buffer=new Uint8Array(0),this._stats=new a,this._decoder=new s("utf-8"),this._onStream=e.onStream||r,this._onMetadata=e.onMetadata||r,this._onMetadataFailed=e.onMetadataFailed||r,this._onError=e.onError||r,this._enableLogging=e.enableLogging||!1,this._onStreamPromise=Promise.resolve(),this._onMetadataPromise=Promise.resolve(),this._generator=this._passThroughParser(),this._generator.next()}*_passThroughParser(){for(this._remainingData=1/0;;)yield*this._sendStream(yield*this._getNextValue())}static _concatBuffers(e,t){const i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i}*iterator(e){for(let t=this._generator.next(e);t.value;t=this._generator.next())yield t.value}readAll(e){for(let t=this._generator.next(e);t.value;t=this._generator.next());}async*asyncIterator(e){for(let t=this._generator.next(e);t.value;t=this._generator.next())await this._onStreamPromise,await this._onMetadataPromise,yield t.value}async asyncReadAll(e){for(let t=this._generator.next(e);t.value;t=this._generator.next())await this._onStreamPromise,await this._onMetadataPromise}_logError(...e){this._enableLogging&&console.warn("icecast-metadata-js",e.reduce((e,t)=>e+"\n  "+t,"")),this._onError(...e)}*_sendStream(e){this._stats.addStreamBytes(e.length);const t={stream:e,stats:this._stats.stats};this._onStreamPromise=this._onStream(t),yield t}*_sendMetadata(e){const t={metadata:e,stats:this._stats.stats};this._onMetadataPromise=this._onMetadata(t),yield t}*_getNextValue(e=0){for(this._currentPosition===this._buffer.length&&(this._buffer=yield*this._readData(),this._currentPosition=0);this._buffer.length-this._currentPosition<e;)this._buffer=n._concatBuffers(this._buffer,yield*this._readData());const t=this._buffer.subarray(this._currentPosition,(e||this._remainingData)+this._currentPosition);return this._stats.addBytes(t.length),this._remainingData=t.length<this._remainingData?this._remainingData-t.length:0,this._currentPosition+=t.length,t}*_readData(){let e;do{e=yield}while(!e||0===e.length);return this._stats.addCurrentBytesRemaining(e.length),e}}e.exports=n},146:function(e,t,i){const s=i(147),a=i(234),r=i(235),n=i(455);e.exports=class{constructor({metadataTypes:e=["icy"],...t}={}){const i=e.includes("icy"),o=e.includes("ogg");this._metadataParser=i&&o?new n(t):o?new r(t):i?new a(t):new s(t)}static parseIcyMetadata(e){return a.parseIcyMetadata(e)}get icyMetaInt(){return this._metadataParser.icyMetaInt}*iterator(e){yield*this._metadataParser.iterator(e)}readAll(e){this._metadataParser.readAll(e)}async*asyncIterator(e){return yield*this._metadataParser.asyncIterator(e)}async asyncReadAll(e){return this._metadataParser.asyncReadAll(e)}}},147:function(e,t,i){const s=i(230).TextDecoder||TextDecoder,a=i(454),r=()=>{};class n{constructor(e){this._remainingData=0,this._currentPosition=0,this._buffer=new Uint8Array(0),this._stats=new a,this._decoder=new s("utf-8"),this._onStream=e.onStream||r,this._onMetadata=e.onMetadata||r,this._onMetadataFailed=e.onMetadataFailed||r,this._onError=e.onError||r,this._enableLogging=e.enableLogging||!1,this._onStreamPromise=Promise.resolve(),this._onMetadataPromise=Promise.resolve(),this._generator=this._passThroughParser(),this._generator.next()}*_passThroughParser(){for(this._remainingData=1/0;;)yield*this._sendStream(yield*this._getNextValue())}static _concatBuffers(e,t){const i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i}*iterator(e){for(let t=this._generator.next(e);t.value;t=this._generator.next())yield t.value}readAll(e){for(let t=this._generator.next(e);t.value;t=this._generator.next());}async*asyncIterator(e){for(let t=this._generator.next(e);t.value;t=this._generator.next())await this._onStreamPromise,await this._onMetadataPromise,yield t.value}async asyncReadAll(e){for(let t=this._generator.next(e);t.value;t=this._generator.next())await this._onStreamPromise,await this._onMetadataPromise}_logError(...e){this._enableLogging&&console.warn("icecast-metadata-js",e.reduce((e,t)=>e+"\n  "+t,"")),this._onError(...e)}*_sendStream(e){this._stats.addStreamBytes(e.length);const t={stream:e,stats:this._stats.stats};this._onStreamPromise=this._onStream(t),yield t}*_sendMetadata(e){const t={metadata:e,stats:this._stats.stats};this._onMetadataPromise=this._onMetadata(t),yield t}*_getNextValue(e=0){for(this._currentPosition===this._buffer.length&&(this._buffer=yield*this._readData(),this._currentPosition=0);this._buffer.length-this._currentPosition<e;)this._buffer=n._concatBuffers(this._buffer,yield*this._readData());const t=this._buffer.subarray(this._currentPosition,(e||this._remainingData)+this._currentPosition);return this._stats.addBytes(t.length),this._remainingData=t.length<this._remainingData?this._remainingData-t.length:0,this._currentPosition+=t.length,t}*_readData(){let e;do{e=yield}while(!e||0===e.length);return this._stats.addCurrentBytesRemaining(e.length),e}}e.exports=n},229:function(e,t){const i=()=>{};e.exports=class{constructor({icyBr:e,onMetadataUpdate:t=i,onMetadataEnqueue:s=i}){this._icyBr=e,this._onMetadataUpdate=t,this._onMetadataEnqueue=s,this._isInitialMetadata=!0,this._metadataQueue=[]}get metadataQueue(){return this._metadataQueue.map(({_timeoutId:e,...t})=>t)}addMetadata({metadata:e,stats:t},i,s=0){this._enqueueMetadata(e,i,s+this.getTimeByBytes(t.currentStreamPosition))}getTimeByBytes(e){return this._icyBr?e/(125*this._icyBr):0}purgeMetadataQueue(){this._metadataQueue.forEach(e=>clearTimeout(e._timeoutId)),this._metadataQueue=[]}_enqueueMetadata(e,t,i){const s={metadata:e,timestampOffset:t,timestamp:i};this._metadataQueue.push(s),this._onMetadataEnqueue(e,t,i),this._isInitialMetadata?(this._dequeueMetadata(),this._isInitialMetadata=!1):s._timeoutId=setTimeout(()=>{this._dequeueMetadata()},1e3*(t-i))}_dequeueMetadata(){const{metadata:e,timestampOffset:t,timestamp:i}=this._metadataQueue.shift();this._onMetadataUpdate(e,t,i)}}},230:function(e,t,i){(function(e){var s=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),i={},s=0;s<t.length;s++)i[t[s]]=Object.getOwnPropertyDescriptor(e,t[s]);return i},a=/%[sdj%]/g;t.format=function(e){if(!f(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(o(arguments[i]));return t.join(" ")}i=1;for(var s=arguments,r=s.length,n=String(e).replace(a,(function(e){if("%%"===e)return"%";if(i>=r)return e;switch(e){case"%s":return String(s[i++]);case"%d":return Number(s[i++]);case"%j":try{return JSON.stringify(s[i++])}catch(e){return"[Circular]"}default:return e}})),c=s[i];i<r;c=s[++i])p(c)||!v(c)?n+=" "+c:n+=" "+o(c);return n},t.deprecate=function(i,s){if(void 0!==e&&!0===e.noDeprecation)return i;if(void 0===e)return function(){return t.deprecate(i,s).apply(this,arguments)};var a=!1;return function(){if(!a){if(e.throwDeprecation)throw new Error(s);e.traceDeprecation?console.trace(s):console.error(s),a=!0}return i.apply(this,arguments)}};var r,n={};function o(e,i){var s={seen:[],stylize:h};return arguments.length>=3&&(s.depth=arguments[2]),arguments.length>=4&&(s.colors=arguments[3]),g(i)?s.showHidden=i:i&&t._extend(s,i),y(s.showHidden)&&(s.showHidden=!1),y(s.depth)&&(s.depth=2),y(s.colors)&&(s.colors=!1),y(s.customInspect)&&(s.customInspect=!0),s.colors&&(s.stylize=c),l(s,e,s.depth)}function c(e,t){var i=o.styles[t];return i?"["+o.colors[i][0]+"m"+e+"["+o.colors[i][1]+"m":e}function h(e,t){return e}function l(e,i,s){if(e.customInspect&&i&&M(i.inspect)&&i.inspect!==t.inspect&&(!i.constructor||i.constructor.prototype!==i)){var a=i.inspect(s,e);return f(a)||(a=l(e,a,s)),a}var r=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(f(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}if(_(t))return e.stylize(""+t,"number");if(g(t))return e.stylize(""+t,"boolean");if(p(t))return e.stylize("null","null")}(e,i);if(r)return r;var n=Object.keys(i),o=function(e){var t={};return e.forEach((function(e,i){t[e]=!0})),t}(n);if(e.showHidden&&(n=Object.getOwnPropertyNames(i)),w(i)&&(n.indexOf("message")>=0||n.indexOf("description")>=0))return d(i);if(0===n.length){if(M(i)){var c=i.name?": "+i.name:"";return e.stylize("[Function"+c+"]","special")}if(b(i))return e.stylize(RegExp.prototype.toString.call(i),"regexp");if(S(i))return e.stylize(Date.prototype.toString.call(i),"date");if(w(i))return d(i)}var h,v="",x=!1,B=["{","}"];(m(i)&&(x=!0,B=["[","]"]),M(i))&&(v=" [Function"+(i.name?": "+i.name:"")+"]");return b(i)&&(v=" "+RegExp.prototype.toString.call(i)),S(i)&&(v=" "+Date.prototype.toUTCString.call(i)),w(i)&&(v=" "+d(i)),0!==n.length||x&&0!=i.length?s<0?b(i)?e.stylize(RegExp.prototype.toString.call(i),"regexp"):e.stylize("[Object]","special"):(e.seen.push(i),h=x?function(e,t,i,s,a){for(var r=[],n=0,o=t.length;n<o;++n)E(t,String(n))?r.push(u(e,t,i,s,String(n),!0)):r.push("");return a.forEach((function(a){a.match(/^\d+$/)||r.push(u(e,t,i,s,a,!0))})),r}(e,i,s,o,n):n.map((function(t){return u(e,i,s,o,t,x)})),e.seen.pop(),function(e,t,i){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return i[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1];return i[0]+t+" "+e.join(", ")+" "+i[1]}(h,v,B)):B[0]+v+B[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function u(e,t,i,s,a,r){var n,o,c;if((c=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]}).get?o=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(o=e.stylize("[Setter]","special")),E(s,a)||(n="["+a+"]"),o||(e.seen.indexOf(c.value)<0?(o=p(i)?l(e,c.value,null):l(e,c.value,i-1)).indexOf("\n")>-1&&(o=r?o.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+o.split("\n").map((function(e){return"   "+e})).join("\n")):o=e.stylize("[Circular]","special")),y(n)){if(r&&a.match(/^\d+$/))return o;(n=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=e.stylize(n,"name")):(n=n.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),n=e.stylize(n,"string"))}return n+": "+o}function m(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function p(e){return null===e}function _(e){return"number"==typeof e}function f(e){return"string"==typeof e}function y(e){return void 0===e}function b(e){return v(e)&&"[object RegExp]"===x(e)}function v(e){return"object"==typeof e&&null!==e}function S(e){return v(e)&&"[object Date]"===x(e)}function w(e){return v(e)&&("[object Error]"===x(e)||e instanceof Error)}function M(e){return"function"==typeof e}function x(e){return Object.prototype.toString.call(e)}function B(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(i){if(y(r)&&(r=e.env.NODE_DEBUG||""),i=i.toUpperCase(),!n[i])if(new RegExp("\\b"+i+"\\b","i").test(r)){var s=e.pid;n[i]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",i,s,e)}}else n[i]=function(){};return n[i]},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=m,t.isBoolean=g,t.isNull=p,t.isNullOrUndefined=function(e){return null==e},t.isNumber=_,t.isString=f,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=b,t.isObject=v,t.isDate=S,t.isError=w,t.isFunction=M,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=i(450);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var e=new Date,t=[B(e.getHours()),B(e.getMinutes()),B(e.getSeconds())].join(":");return[e.getDate(),k[e.getMonth()],t].join(" ")}function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",C(),t.format.apply(t,arguments))},t.inherits=i(451),t._extend=function(e,t){if(!t||!v(t))return e;for(var i=Object.keys(t),s=i.length;s--;)e[i[s]]=t[i[s]];return e};var I="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function T(e,t){if(!e){var i=new Error("Promise was rejected with a falsy value");i.reason=e,e=i}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(I&&e[I]){var t;if("function"!=typeof(t=e[I]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,I,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,i,s=new Promise((function(e,s){t=e,i=s})),a=[],r=0;r<arguments.length;r++)a.push(arguments[r]);a.push((function(e,s){e?i(e):t(s)}));try{e.apply(this,a)}catch(e){i(e)}return s}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),I&&Object.defineProperty(t,I,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,s(e))},t.promisify.custom=I,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function i(){for(var i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);var a=i.pop();if("function"!=typeof a)throw new TypeError("The last argument must be of type Function");var r=this,n=function(){return a.apply(r,arguments)};t.apply(this,i).then((function(t){e.nextTick(n,null,t)}),(function(t){e.nextTick(T,t,n)}))}return Object.setPrototypeOf(i,Object.getPrototypeOf(t)),Object.defineProperties(i,s(t)),i}}).call(this,i(139))},231:function(e,t,i){const s=i(145);class a extends s{constructor({icyMetaInt:e,icyDetectionTimeout:t=2e3,...i}){super(i),this._icyMetaInt=e,this._icyDetectionTimeout=t,this._generator=this._icyParser(),this._generator.next()}*_icyParser(){if(yield*this._hasIcyMetadata())for(;;)this._remainingData=this._icyMetaInt,yield*this._getStream(),yield*this._getMetadataLength(),this._remainingData&&(yield*this._getMetadata());this._remainingData=1/0,yield*this._getStream()}static parseIcyMetadata(e){const t=/(?<key>[^\0]+?)='(?<val>[^\0]*?)(;$|';|'$|$)/,i={};for(const s of e.match(new RegExp(t,"g"))||[]){const e=s.match(t);e&&(i[e.groups.key]=e.groups.val)}return i}get icyMetaInt(){return this._icyMetaInt}*_hasIcyMetadata(){if(this._icyMetaInt>0)return!0;if(!this._icyDetectionTimeout)return!1;this._logError("Passed in Icy-MetaInt is invalid. Attempting to detect ICY Metadata.","See https://github.com/eshaz/icecast-metadata-js for information on how to properly request ICY Metadata.");const e=[null,83,116,114,101,97,109,84,105,116,108,101,61],t=Date.now();let i=0;for(;t+this._icyDetectionTimeout>Date.now();){this._buffer=s._concatBuffers(this._buffer,yield*this._readData());e:for(;i<this._buffer.length-e.length;){for(let t=1;t<e.length;t++)if(this._buffer[t+i]!==e[t]){i++;continue e}return this._logError(`Found ICY Metadata! Setting Icy-MetaInt to ${i}.`),this._icyMetaInt=i,!0}}return this._logError("ICY Metadata not detected, but continuing anyway. Audio errors will occur if there is ICY metadata.",`Searched ${this._buffer.length} bytes for ${(Date.now()-t)/1e3} seconds.`,"Try increasing the `icyDetectionTimeout` value if ICY metadata is present in the stream."),this._onMetadataFailed("icy"),!1}*_getStream(){for(this._stats.currentStreamBytesRemaining=this._remainingData;this._remainingData;)yield*this._sendStream(yield*super._getNextValue())}*_getMetadataLength(){this._remainingData=1;do{this._remainingData=16*(yield*this._getNextValue())[0]}while(1===this._remainingData);this._stats.addMetadataLengthBytes(1)}*_getMetadata(){this._stats.currentMetadataBytesRemaining=this._remainingData;const e=yield*this._getNextValue(this._remainingData);this._stats.addMetadataBytes(e.length),yield*this._sendMetadata(a.parseIcyMetadata(this._decoder.decode(e)))}}e.exports=a},232:function(e,t,i){const s=i(145);e.exports=class extends s{constructor(e){super(e),this._generator=this._oggParser(),this._generator.next()}*_oggParser(){if(yield*this._hasOggPage()){const e=yield*this._identifyCodec();if(e)for(;yield*this._hasOggPage();)yield*this._getMetadata(e),yield*this._getStream()}this._remainingData=1/0,yield*this._getStream()}_getUint32(e,t=0){return new DataView(Uint8Array.from([...e.subarray(t,t+4)]).buffer).getUint32(0,!0)}_matchBytes(e,t){return String.fromCharCode(...t).match(e)}*_hasOggPage(){let e=[];for(;e.length<=65307;){const t=yield*super._getNextValue(5);if(79===t[0]&&103===t[1]&&103===t[2]&&83===t[3]&&!(248&t[5])){this._currentPosition-=5,this._remainingData+=5,this._stats._totalBytesRead-=5,this._stats._currentBytesRemaining+=5;break}e.push(t[0]),this._currentPosition-=4,this._stats._totalBytesRead-=4,this._stats._currentBytesRemaining+=4}if(e.length&&(yield*this._sendStream(Uint8Array.from(e))),e.length>65307)return this._logError("This stream is not an OGG stream. No OGG metadata will be returned.","See https://github.com/eshaz/icecast-metadata-js for information on OGG metadata."),this._onMetadataFailed("ogg"),!1;const t=yield*this._getNextValue(27),i=yield*this._getNextValue(t[26]);return this._remainingData=i.reduce((e,t)=>e+t,0),!0}*_identifyCodec(){const e=yield*this._getNextValue(8);return yield*this._getStream(),this._matchBytes(/\x7fFLAC/,e.subarray(0,5))?{regex:/^[\x84|\x04]/,length:4}:this._matchBytes(/OpusHead/,e.subarray(0,8))?{regex:/OpusTags/,length:8}:this._matchBytes(/\x01vorbis/,e.subarray(0,7))?{regex:/\x03vorbis/,length:7}:void 0}*_getMetadata({regex:e,length:t}){this._matchBytes(e,yield*this._getNextValue(t))&&(yield*this._sendMetadata(yield*this._readVorbisComment()))}*_getStream(){for(;this._remainingData;)yield*this._getNextValue()}*_getNextValue(e){const t=yield*super._getNextValue(e);return yield*this._sendStream(t),t}*_readData(){const e=yield*super._readData();return this._stats.currentStreamBytesRemaining=e.length,e}*_readVorbisComment(){const e=this._getUint32(yield*this._getNextValue(4));this._stats.addMetadataBytes(4);const t=this._decoder.decode(yield*this._getNextValue(e));this._stats.addMetadataBytes(e);const i=this._getUint32(yield*this._getNextValue(4));this._stats.addMetadataBytes(4);const s=[];for(let e=0;e<i;e++){const e=yield*this._getNextValue(4);this._stats.addMetadataBytes(4),s.push(yield*this._getNextValue(this._getUint32(e))),this._stats.addMetadataBytes(s[s.length-1].length)}return this._stats.currentMetadataBytesRemaining=0,s.reduce((e,t)=>{const i=t.indexOf(61),s=String.fromCharCode(...t.subarray(0,i)).toUpperCase(),a=this._decoder.decode(t.subarray(i+1));return e[s]=e[s]?`${e[s]}; ${a}`:a,e},{VENDOR_STRING:t})}}},233:function(e,t){const i=()=>{};e.exports=class{constructor({icyBr:e,onMetadataUpdate:t=i,onMetadataEnqueue:s=i}){this._icyBr=e,this._onMetadataUpdate=t,this._onMetadataEnqueue=s,this._isInitialMetadata=!0,this._metadataQueue=[]}get metadataQueue(){return this._metadataQueue.map(({_timeoutId:e,...t})=>t)}addMetadata({metadata:e,stats:t},i,s=0){this._enqueueMetadata(e,i,s+this.getTimeByBytes(t.currentStreamPosition))}getTimeByBytes(e){return this._icyBr?e/(125*this._icyBr):0}purgeMetadataQueue(){this._metadataQueue.forEach(e=>clearTimeout(e._timeoutId)),this._metadataQueue=[]}_enqueueMetadata(e,t,i){const s={metadata:e,timestampOffset:t,timestamp:i};this._metadataQueue.push(s),this._onMetadataEnqueue(e,t,i),this._isInitialMetadata?(this._dequeueMetadata(),this._isInitialMetadata=!1):s._timeoutId=setTimeout(()=>{this._dequeueMetadata()},1e3*(t-i))}_dequeueMetadata(){const{metadata:e,timestampOffset:t,timestamp:i}=this._metadataQueue.shift();this._onMetadataUpdate(e,t,i)}}},234:function(e,t,i){const s=i(147);class a extends s{constructor({icyMetaInt:e,icyDetectionTimeout:t=2e3,...i}){super(i),this._icyMetaInt=e,this._icyDetectionTimeout=t,this._generator=this._icyParser(),this._generator.next()}*_icyParser(){if(yield*this._hasIcyMetadata())for(;;)this._remainingData=this._icyMetaInt,yield*this._getStream(),yield*this._getMetadataLength(),this._remainingData&&(yield*this._getMetadata());this._remainingData=1/0,yield*this._getStream()}static parseIcyMetadata(e){const t=/(?<key>[^\0]+?)='(?<val>[^\0]*?)(;$|';|'$|$)/,i={};for(const s of e.match(new RegExp(t,"g"))||[]){const e=s.match(t);e&&(i[e.groups.key]=e.groups.val)}return i}get icyMetaInt(){return this._icyMetaInt}*_hasIcyMetadata(){if(this._icyMetaInt>0)return!0;if(!this._icyDetectionTimeout)return!1;this._logError("Passed in Icy-MetaInt is invalid. Attempting to detect ICY Metadata.","See https://github.com/eshaz/icecast-metadata-js for information on how to properly request ICY Metadata.");const e=[null,83,116,114,101,97,109,84,105,116,108,101,61],t=Date.now();let i=0;for(;t+this._icyDetectionTimeout>Date.now();){this._buffer=s._concatBuffers(this._buffer,yield*this._readData());e:for(;i<this._buffer.length-e.length;){for(let t=1;t<e.length;t++)if(this._buffer[t+i]!==e[t]){i++;continue e}return this._logError(`Found ICY Metadata! Setting Icy-MetaInt to ${i}.`),this._icyMetaInt=i,!0}}return this._logError("ICY Metadata not detected, but continuing anyway. Audio errors will occur if there is ICY metadata.",`Searched ${this._buffer.length} bytes for ${(Date.now()-t)/1e3} seconds.`,"Try increasing the `icyDetectionTimeout` value if ICY metadata is present in the stream."),this._onMetadataFailed("icy"),!1}*_getStream(){for(this._stats.currentStreamBytesRemaining=this._remainingData;this._remainingData;)yield*this._sendStream(yield*super._getNextValue())}*_getMetadataLength(){this._remainingData=1;do{this._remainingData=16*(yield*this._getNextValue())[0]}while(1===this._remainingData);this._stats.addMetadataLengthBytes(1)}*_getMetadata(){this._stats.currentMetadataBytesRemaining=this._remainingData;const e=yield*this._getNextValue(this._remainingData);this._stats.addMetadataBytes(e.length),yield*this._sendMetadata(a.parseIcyMetadata(this._decoder.decode(e)))}}e.exports=a},235:function(e,t,i){const s=i(147);e.exports=class extends s{constructor(e){super(e),this._generator=this._oggParser(),this._generator.next()}*_oggParser(){if(yield*this._hasOggPage()){const e=yield*this._identifyCodec();if(e)for(;yield*this._hasOggPage();)yield*this._getMetadata(e),yield*this._getStream()}this._remainingData=1/0,yield*this._getStream()}_getUint32(e,t=0){return new DataView(Uint8Array.from([...e.subarray(t,t+4)]).buffer).getUint32(0,!0)}_matchBytes(e,t){return String.fromCharCode(...t).match(e)}*_hasOggPage(){let e=[];for(;e.length<=65307;){const t=yield*super._getNextValue(5);if(79===t[0]&&103===t[1]&&103===t[2]&&83===t[3]&&!(248&t[5])){this._currentPosition-=5,this._remainingData+=5,this._stats._totalBytesRead-=5,this._stats._currentBytesRemaining+=5;break}e.push(t[0]),this._currentPosition-=4,this._stats._totalBytesRead-=4,this._stats._currentBytesRemaining+=4}if(e.length&&(yield*this._sendStream(Uint8Array.from(e))),e.length>65307)return this._logError("This stream is not an OGG stream. No OGG metadata will be returned.","See https://github.com/eshaz/icecast-metadata-js for information on OGG metadata."),this._onMetadataFailed("ogg"),!1;const t=yield*this._getNextValue(27),i=yield*this._getNextValue(t[26]);return this._remainingData=i.reduce((e,t)=>e+t,0),!0}*_identifyCodec(){const e=yield*this._getNextValue(8);return yield*this._getStream(),this._matchBytes(/\x7fFLAC/,e.subarray(0,5))?{regex:/^[\x84|\x04]/,length:4}:this._matchBytes(/OpusHead/,e.subarray(0,8))?{regex:/OpusTags/,length:8}:this._matchBytes(/\x01vorbis/,e.subarray(0,7))?{regex:/\x03vorbis/,length:7}:void 0}*_getMetadata({regex:e,length:t}){this._matchBytes(e,yield*this._getNextValue(t))&&(yield*this._sendMetadata(yield*this._readVorbisComment()))}*_getStream(){for(;this._remainingData;)yield*this._getNextValue()}*_getNextValue(e){const t=yield*super._getNextValue(e);return yield*this._sendStream(t),t}*_readData(){const e=yield*super._readData();return this._stats.currentStreamBytesRemaining=e.length,e}*_readVorbisComment(){const e=this._getUint32(yield*this._getNextValue(4));this._stats.addMetadataBytes(4);const t=this._decoder.decode(yield*this._getNextValue(e));this._stats.addMetadataBytes(e);const i=this._getUint32(yield*this._getNextValue(4));this._stats.addMetadataBytes(4);const s=[];for(let e=0;e<i;e++){const e=yield*this._getNextValue(4);this._stats.addMetadataBytes(4),s.push(yield*this._getNextValue(this._getUint32(e))),this._stats.addMetadataBytes(s[s.length-1].length)}return this._stats.currentMetadataBytesRemaining=0,s.reduce((e,t)=>{const i=t.indexOf(61),s=String.fromCharCode(...t.subarray(0,i)).toUpperCase(),a=this._decoder.decode(t.subarray(i+1));return e[s]=e[s]?`${e[s]}; ${a}`:a,e},{VENDOR_STRING:t})}}},236:function(e,t,i){const s=i(146),a=()=>{};class r{constructor(e,{icyMetaInt:t,onStream:i=a,...n}){let o;this._readableStream=new ReadableStream({async start(a){o=new s({...n,icyMetaInt:parseInt(e.headers.get("Icy-MetaInt"))||t,onStream:async e=>(a.enqueue(e.stream),i(e))});for await(const t of r.asyncIterator(e.body))await o.asyncReadAll(t);a.close()}}),this._icecast=o}get icyMetaInt(){return this._icecast.icyMetaInt}get readableStream(){return this._readableStream}async startReading(){try{for await(const e of r.asyncIterator(this._readableStream));}catch(e){if("AbortError"!==e.name)throw e}}static asyncIterator(e){const t=e.getReader();return{[Symbol.asyncIterator]:()=>({next:()=>t.read()})}}}e.exports=r},246:function(e,t,i){"use strict";i(281);var s=i(29),a=i(38),r=i(9),n=i(67),o=i(79),c=i(2),h=i(16);t.a=Object(r.a)(s.a,n.a).extend({name:"v-slider",directives:{ClickOutside:o.a},mixins:[n.a],props:{disabled:Boolean,inverseLabel:Boolean,max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:1},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>"boolean"==typeof e||"always"===e},thumbSize:{type:[Number,String],default:32},tickLabels:{type:Array,default:()=>[]},ticks:{type:[Boolean,String],default:!1,validator:e=>"boolean"==typeof e||"always"===e},tickSize:{type:[Number,String],default:2},trackColor:String,trackFillColor:String,value:[Number,String],vertical:Boolean},data:()=>({app:null,oldValue:null,thumbPressed:!1,mouseTimeout:-1,isFocused:!1,isActive:!1,noClick:!1}),computed:{classes(){return{...s.a.options.computed.classes.call(this),"v-input__slider":!0,"v-input__slider--vertical":this.vertical,"v-input__slider--inverse-label":this.inverseLabel}},internalValue:{get(){return this.lazyValue},set(e){e=isNaN(e)?this.minValue:e;const t=this.roundValue(Math.min(Math.max(e,this.minValue),this.maxValue));t!==this.lazyValue&&(this.lazyValue=t,this.$emit("input",t))}},trackTransition(){return this.thumbPressed?this.showTicks||this.stepNumeric?"0.1s cubic-bezier(0.25, 0.8, 0.5, 1)":"none":""},minValue(){return parseFloat(this.min)},maxValue(){return parseFloat(this.max)},stepNumeric(){return this.step>0?parseFloat(this.step):0},inputWidth(){return(this.roundValue(this.internalValue)-this.minValue)/(this.maxValue-this.minValue)*100},trackFillStyles(){const e=this.vertical?"bottom":"left",t=this.vertical?"top":"right",i=this.vertical?"height":"width",s=this.$vuetify.rtl?"auto":"0",a=this.$vuetify.rtl?"0":"auto",r=this.isDisabled?`calc(${this.inputWidth}% - 10px)`:this.inputWidth+"%";return{transition:this.trackTransition,[e]:s,[t]:a,[i]:r}},trackStyles(){const e=this.vertical?this.$vuetify.rtl?"bottom":"top":this.$vuetify.rtl?"left":"right",t=this.vertical?"height":"width",i=this.isDisabled?`calc(${100-this.inputWidth}% - 10px)`:`calc(${100-this.inputWidth}%)`;return{transition:this.trackTransition,[e]:"0px",[t]:i}},showTicks(){return this.tickLabels.length>0||!(this.isDisabled||!this.stepNumeric||!this.ticks)},numTicks(){return Math.ceil((this.maxValue-this.minValue)/this.stepNumeric)},showThumbLabel(){return!(this.isDisabled||!this.thumbLabel&&!this.$scopedSlots["thumb-label"])},computedTrackColor(){if(!this.isDisabled)return this.trackColor?this.trackColor:this.isDark?this.validationState:this.validationState||"primary lighten-3"},computedTrackFillColor(){if(!this.isDisabled)return this.trackFillColor?this.trackFillColor:this.validationState||this.computedColor},computedThumbColor(){return this.thumbColor?this.thumbColor:this.validationState||this.computedColor}},watch:{min(e){const t=parseFloat(e);t>this.internalValue&&this.$emit("input",t)},max(e){const t=parseFloat(e);t<this.internalValue&&this.$emit("input",t)},value:{handler(e){this.internalValue=e}}},beforeMount(){this.internalValue=this.value},mounted(){this.app=document.querySelector("[data-app]")||Object(h.c)("Missing v-app or a non-body wrapping element with the [data-app] attribute",this)},methods:{genDefaultSlot(){const e=[this.genLabel()],t=this.genSlider();return this.inverseLabel?e.unshift(t):e.push(t),e.push(this.genProgress()),e},genSlider(){return this.$createElement("div",{class:{"v-slider":!0,"v-slider--horizontal":!this.vertical,"v-slider--vertical":this.vertical,"v-slider--focused":this.isFocused,"v-slider--active":this.isActive,"v-slider--disabled":this.isDisabled,"v-slider--readonly":this.isReadonly,...this.themeClasses},directives:[{name:"click-outside",value:this.onBlur}],on:{click:this.onSliderClick,mousedown:this.onSliderMouseDown}},this.genChildren())},genChildren(){return[this.genInput(),this.genTrackContainer(),this.genSteps(),this.genThumbContainer(this.internalValue,this.inputWidth,this.isActive,this.isFocused,this.onFocus,this.onBlur)]},genInput(){return this.$createElement("input",{attrs:{value:this.internalValue,id:this.computedId,disabled:!0,readonly:!0,tabindex:-1,...this.$attrs}})},genTrackContainer(){const e=[this.$createElement("div",this.setBackgroundColor(this.computedTrackColor,{staticClass:"v-slider__track-background",style:this.trackStyles})),this.$createElement("div",this.setBackgroundColor(this.computedTrackFillColor,{staticClass:"v-slider__track-fill",style:this.trackFillStyles}))];return this.$createElement("div",{staticClass:"v-slider__track-container",ref:"track"},e)},genSteps(){if(!this.step||!this.showTicks)return null;const e=parseFloat(this.tickSize),t=Object(c.h)(this.numTicks+1),i=this.vertical?"bottom":this.$vuetify.rtl?"right":"left",s=this.vertical?this.$vuetify.rtl?"left":"right":"top";this.vertical&&t.reverse();const a=t.map(t=>{const a=[];this.tickLabels[t]&&a.push(this.$createElement("div",{staticClass:"v-slider__tick-label"},this.tickLabels[t]));const r=t*(100/this.numTicks),n=this.$vuetify.rtl?100-this.inputWidth<r:r<this.inputWidth;return this.$createElement("span",{key:t,staticClass:"v-slider__tick",class:{"v-slider__tick--filled":n},style:{width:e+"px",height:e+"px",[i]:`calc(${r}% - ${e/2}px)`,[s]:`calc(50% - ${e/2}px)`}},a)});return this.$createElement("div",{staticClass:"v-slider__ticks-container",class:{"v-slider__ticks-container--always-show":"always"===this.ticks||this.tickLabels.length>0}},a)},genThumbContainer(e,t,i,s,a,r,n="thumb"){const o=[this.genThumb()],c=this.genThumbLabelContent(e);return this.showThumbLabel&&o.push(this.genThumbLabel(c)),this.$createElement("div",this.setTextColor(this.computedThumbColor,{ref:n,key:n,staticClass:"v-slider__thumb-container",class:{"v-slider__thumb-container--active":i,"v-slider__thumb-container--focused":s,"v-slider__thumb-container--show-label":this.showThumbLabel},style:this.getThumbContainerStyles(t),attrs:{role:"slider",tabindex:this.isDisabled?-1:this.$attrs.tabindex?this.$attrs.tabindex:0,"aria-label":this.label,"aria-valuemin":this.min,"aria-valuemax":this.max,"aria-valuenow":this.internalValue,"aria-readonly":String(this.isReadonly),"aria-orientation":this.vertical?"vertical":"horizontal",...this.$attrs},on:{focus:a,blur:r,keydown:this.onKeyDown}}),o)},genThumbLabelContent(e){return this.$scopedSlots["thumb-label"]?this.$scopedSlots["thumb-label"]({value:e}):[this.$createElement("span",[String(e)])]},genThumbLabel(e){const t=Object(c.g)(this.thumbSize),i=this.vertical?`translateY(20%) translateY(${Number(this.thumbSize)/3-1}px) translateX(55%) rotate(135deg)`:"translateY(-20%) translateY(-12px) translateX(-50%) rotate(45deg)";return this.$createElement(a.e,{props:{origin:"bottom center"}},[this.$createElement("div",{staticClass:"v-slider__thumb-label-container",directives:[{name:"show",value:this.isFocused||this.isActive||"always"===this.thumbLabel}]},[this.$createElement("div",this.setBackgroundColor(this.computedThumbColor,{staticClass:"v-slider__thumb-label",style:{height:t,width:t,transform:i}}),[this.$createElement("div",e)])])])},genThumb(){return this.$createElement("div",this.setBackgroundColor(this.computedThumbColor,{staticClass:"v-slider__thumb"}))},getThumbContainerStyles(e){const t=this.vertical?"top":"left";let i=this.$vuetify.rtl?100-e:e;return i=this.vertical?100-i:i,{transition:this.trackTransition,[t]:i+"%"}},onSliderMouseDown(e){var t;e.preventDefault(),this.oldValue=this.internalValue,this.isActive=!0;const i=!c.C||{passive:!0,capture:!0},s=!!c.C&&{passive:!0};(null==(t=e.target)?void 0:t.matches(".v-slider__thumb-container, .v-slider__thumb-container *"))?this.thumbPressed=!0:(window.clearTimeout(this.mouseTimeout),this.mouseTimeout=window.setTimeout(()=>{this.thumbPressed=!0},300)),"touches"in e?(this.app.addEventListener("touchmove",this.onMouseMove,s),Object(c.a)(this.app,"touchend",this.onSliderMouseUp,i)):(this.onMouseMove(e),this.app.addEventListener("mousemove",this.onMouseMove,s),Object(c.a)(this.app,"mouseup",this.onSliderMouseUp,i)),this.$emit("start",this.internalValue)},onSliderMouseUp(e){e.stopPropagation(),window.clearTimeout(this.mouseTimeout),this.thumbPressed=!1;const t=!!c.C&&{passive:!0};this.app.removeEventListener("touchmove",this.onMouseMove,t),this.app.removeEventListener("mousemove",this.onMouseMove,t),this.$emit("mouseup",e),this.$emit("end",this.internalValue),Object(c.j)(this.oldValue,this.internalValue)||(this.$emit("change",this.internalValue),this.noClick=!0),this.isActive=!1},onMouseMove(e){"mousemove"===e.type&&(this.thumbPressed=!0),this.internalValue=this.parseMouseMove(e)},onKeyDown(e){if(!this.isInteractive)return;const t=this.parseKeyDown(e,this.internalValue);null==t||t<this.minValue||t>this.maxValue||(this.internalValue=t,this.$emit("change",t))},onSliderClick(e){if(this.noClick)return void(this.noClick=!1);this.$refs.thumb.focus(),this.onMouseMove(e),this.$emit("change",this.internalValue)},onBlur(e){this.isFocused=!1,this.$emit("blur",e)},onFocus(e){this.isFocused=!0,this.$emit("focus",e)},parseMouseMove(e){const t=this.vertical?"top":"left",i=this.vertical?"height":"width",s=this.vertical?"clientY":"clientX",{[t]:a,[i]:r}=this.$refs.track.getBoundingClientRect(),n="touches"in e?e.touches[0][s]:e[s];let o=Math.min(Math.max((n-a)/r,0),1)||0;return this.vertical&&(o=1-o),this.$vuetify.rtl&&(o=1-o),parseFloat(this.min)+o*(this.maxValue-this.minValue)},parseKeyDown(e,t){if(!this.isInteractive)return;const{pageup:i,pagedown:s,end:a,home:r,left:n,right:o,down:h,up:l}=c.y;if(![i,s,a,r,n,o,h,l].includes(e.keyCode))return;e.preventDefault();const d=this.stepNumeric||1,u=(this.maxValue-this.minValue)/d;if([n,o,h,l].includes(e.keyCode)){t+=((this.$vuetify.rtl?[n,l]:[o,l]).includes(e.keyCode)?1:-1)*d*(e.shiftKey?3:e.ctrlKey?2:1)}else if(e.keyCode===r)t=this.minValue;else if(e.keyCode===a)t=this.maxValue;else{t-=(e.keyCode===s?1:-1)*d*(u>100?u/10:10)}return t},roundValue(e){if(!this.stepNumeric)return e;const t=this.step.toString().trim(),i=t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0,s=this.minValue%this.stepNumeric,a=Math.round((e-s)/this.stepNumeric)*this.stepNumeric+s;return parseFloat(Math.min(a,this.maxValue).toFixed(i))}}})},262:function(e,t,i){"use strict";i.d(t,"a",(function(){return Zt}));const s=()=>{},a=new WeakMap,r="loading",n="playing",o="stopping",c="stopped",h="retrying",l="play",d="load",u="streamstart",m="stream",g="streamend",p="metadata",_="metadataenqueue",f="codecupdate",y="stop",b="retry",v="retrytimeout",S="warn",w="error",M=Symbol(),x=Symbol(),B=Symbol(),k=Symbol(),C=Symbol(),E=Symbol(),I=Symbol(),T=Symbol(),R=Symbol(),P=Symbol(),D=Symbol(),L=Symbol(),A=Symbol(),F=Symbol(),N=Symbol(),z=Symbol(),U=Symbol();var O=i(229),V=i.n(O),H=i(117),$=i.n(H);const j=()=>{};class q{constructor(e,{icyMetaInt:t,onStream:i=j,...s}){let a;this._readableStream=new ReadableStream({async start(r){a=new $.a({...s,icyMetaInt:parseInt(e.headers.get("Icy-MetaInt"))||t,onStream:async e=>(r.enqueue(e.stream),i(e))});for await(const t of q.asyncIterator(e.body))await a.asyncReadAll(t);r.close()}}),this._icecast=a}get icyMetaInt(){return this._icecast.icyMetaInt}get readableStream(){return this._readableStream}async startReading(){try{for await(const e of q.asyncIterator(this._readableStream));}catch(e){if("AbortError"!==e.name)throw e}}static asyncIterator(e){const t=e.getReader();return{[Symbol.asyncIterator]:()=>({next:()=>t.read()})}}}class G{constructor(){this._listeners=[]}hasEventListener(e,t){return this._listeners.some(i=>i.type===e&&i.listener===t)}addEventListener(e,t,i={}){return this.hasEventListener(e,t)||this._listeners.push({type:e,listener:t,options:i}),this}removeEventListener(e,t){const i=this._listeners.findIndex(i=>i.type===e&&i.listener===t);return i>=0&&this._listeners.splice(i,1),this}removeEventListeners(){return this._listeners=[],this}dispatchEvent(e){return this._listeners.filter(t=>t.type===e.type).forEach(t=>{const{type:i,listener:s,options:{once:a}}=t;s.call(this,e),!0===a&&this.removeEventListener(i,s)}),this}}class Q{constructor(e){const t=a.get(e);this._icecast=e,this._audioElement=t[B],this._endpoint=t[M],this._metadataTypes=t[x],this._icyMetaInt=t[k],this._icyDetectionTimeout=t[C],this._hasIcy=t[N],this._icecastMetadataQueue=t[z]}get icyMetaInt(){return this._icecastReadableStream&&this._icecastReadableStream.icyMetaInt}async play(){return this.fetchStream().then(async e=>(this._icecast[D](u),this.playResponse(e).finally(()=>{this._icecast[D](g)})))}async fetchStream(){const e=await fetch(this._endpoint,{method:"GET",headers:this._hasIcy?{"Icy-MetaData":1}:{},signal:a.get(this._icecast)[U].signal});if(!e.ok){const t=new Error(`${e.status} received from ${e.url}`);throw t.name="HTTP Response Error",t}return e}async playResponse(e){this._icecastReadableStream=new q(e,{onMetadata:this.getOnMetadata(),onStream:this.getOnStream(e),onError:(...e)=>this._icecast[D](S,...e),metadataTypes:this._metadataTypes,icyMetaInt:this._icyMetaInt,icyDetectionTimeout:this._icyDetectionTimeout}),await this._icecastReadableStream.startReading()}getOnMetadata(){return e=>{this._icecastMetadataQueue.addMetadata(e,this.metadataTimestamp,this._audioElement.currentTime)}}}class W{constructor(e){this.CACHE_DURATION=6e4,this._icecast=e,this.initSync(),this.initQueue()}initSync(){this._syncQueue=[],this._alignIndex=0,this._syncIndex=0}initQueue(){this._queue=[],this._queueDuration=0}push({crc32:e,duration:t}){if(this._queue.push({crc32:e,duration:t}),this._queueDuration+=t,this._queueDuration>=this.CACHE_DURATION){const{duration:e}=this._queue.shift();this._queueDuration-=e}}sync(e){this._syncQueue.push(...e);e:for(;this._alignIndex<this._queue.length;){for(;this._syncIndex<this._syncQueue.length&&this._alignIndex+this._syncIndex<this._queue.length;){if(this._syncQueue[this._syncIndex].crc32!==this._queue[this._alignIndex+this._syncIndex].crc32){this._syncIndex=0,this._alignIndex++;continue e}this._syncIndex++}break}if(this._alignIndex===this._queue.length){this._icecast[D](S,"Reconnected successfully after retry event.","Found no overlapping frames from previous request.","Unable to sync old and new request.");const e=this._syncQueue;return this.initSync(),this.initQueue(),e}const t=this._queue.length-this._alignIndex;if(this._syncQueue.length>t){this._icecast[D](S,"Reconnected successfully after retry event.",`Found ${t} frames (${(this._queue.slice(this._alignIndex).reduce((e,{duration:t})=>e+t,0)/1e3).toFixed(3)} seconds) of overlapping audio data in new request.`,"Synchronized old and new request.");const e=this._syncQueue.slice(t);return this.initSync(),e}return[]}}const K=(...e)=>{console.error("codec-parser",e.reduce((e,t)=>e+"\n  "+t,""))},Y=e=>{let t=new Int32Array(256);for(let i=0;i<256;i++){let s=i;for(let t=8;t>0;t--)s=e(s);t[i]=s}return t},X=Y(e=>128&e?7^e<<1:e<<1),J=Y(e=>1&e?3988292384^e>>>1:e>>>1),Z=[0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15],ee=e=>Z[15&e]<<4|Z[e>>4];class te{constructor(e){this._data=e,this._pos=8*e.length}set position(e){this._pos=e}get position(){return this._pos}read(e){const t=Math.floor(this._pos/8),i=this._pos%8;this._pos-=e;return(ee(this._data[t-1])<<8)+ee(this._data[t])>>7-i&255}}const ie=new WeakMap,se=new WeakMap,ae=new WeakMap;class re{constructor(e){this._onCodecUpdate=e,this.reset()}static getKey(e){return String.fromCharCode(...e)}enable(){this._isEnabled=!0}reset(){this._headerCache=new Map,this._codecUpdateData=new WeakMap,this._isEnabled=!1}getHeader(e){const t=this._headerCache.get(e);return t&&e!==this._currentHeader&&(this._currentHeader=e,this._onCodecUpdate({...this._codecUpdateData.get(t)})),t}setHeader(e,t,i){this._isEnabled&&(e!==this._currentHeader&&(this._currentHeader=e,this._onCodecUpdate({...i})),this._headerCache.set(e,t),this._codecUpdateData.set(t,i))}}class ne{constructor(e){this._headerCache=new re(e)}syncFrame(e,t=0){let i=new this.Frame(e.subarray(t),this._headerCache);for(;!i.header&&t+this._maxHeaderLength<e.length;)t+=ae.get(i).length||1,i=new this.Frame(e.subarray(t),this._headerCache);return{frame:i,remainingData:t}}fixedLengthFrame(e){return this.fixedLengthFrameSync(e,!1)}fixedLengthFrameSync(e,t=!0){let{frame:i,remainingData:s}=this.syncFrame(e),a=[];for(;ie.get(i.header)&&ae.get(i).length+s+this._maxHeaderLength<e.length;){const r=new this.Frame(e.subarray(ae.get(i).length+s),this._headerCache);if(r.header||!t){if(this._headerCache.enable(),a.push(i),s+=ae.get(i).length,i=r,!ie.get(i.header))break}else{this._headerCache.reset(),s++;const t=this.syncFrame(e,s);s+=t.remainingData,i=t.frame}}return{frames:a,remainingData:s}}}class oe{constructor(e,t,i){this.data=t||[],this.header=e,this.samples=i,this.duration=e&&i&&this.samples/this.header.sampleRate*1e3,this.frameNumber=void 0,this.totalBytesOut=void 0,this.totalSamples=void 0,this.totalDuration=void 0,ae.set(this,{length:this.data.length})}}class ce{constructor(e,t){se.set(this,e),ie.set(this,t),this.bitDepth=e.bitDepth,this.channels=e.channels,this.sampleRate=e.sampleRate}}const he={0:["free","free","free","free","free"],16:[32,32,32,32,8],32:[64,48,40,48,16],48:[96,56,48,56,24],64:[128,64,56,64,32],80:[160,80,64,80,40],96:[192,96,80,96,48],112:[224,112,96,112,56],128:[256,128,112,128,64],144:[288,160,128,144,80],160:[320,192,160,160,96],176:[352,224,192,176,112],192:[384,256,224,192,128],208:[416,320,256,224,144],224:[448,384,320,256,160],240:["bad","bad","bad","bad","bad"]},le={0:"bands 4 to 31",16:"bands 8 to 31",32:"bands 12 to 31",48:"bands 16 to 31"},de={0:{description:"reserved"},2:{description:"Layer III",framePadding:1,modeExtensions:{0:"Intensity stereo off, MS stereo off",16:"Intensity stereo on, MS stereo off",32:"Intensity stereo off, MS stereo on",48:"Intensity stereo on, MS stereo on"},v1:{bitrateIndex:2,samples:1152},v2:{bitrateIndex:4,samples:576}},4:{description:"Layer II",framePadding:1,modeExtensions:le,samples:1152,v1:{bitrateIndex:1},v2:{bitrateIndex:4}},6:{description:"Layer I",framePadding:4,modeExtensions:le,samples:384,v1:{bitrateIndex:0},v2:{bitrateIndex:3}}},ue={0:{description:"MPEG Version 2.5 (later extension of MPEG 2)",layers:"v2",sampleRates:{0:11025,4:12e3,8:8e3,12:"reserved"}},8:{description:"reserved"},16:{description:"MPEG Version 2 (ISO/IEC 13818-3)",layers:"v2",sampleRates:{0:22050,4:24e3,8:16e3,12:"reserved"}},24:{description:"MPEG Version 1 (ISO/IEC 11172-3)",layers:"v1",sampleRates:{0:44100,4:48e3,8:32e3,12:"reserved"}}},me={0:"16bit CRC",1:"none"},ge={0:"none",1:"50/15 ms",2:"reserved",3:"CCIT J.17"},pe={0:{channels:2,description:"Stereo"},64:{channels:2,description:"Joint stereo"},128:{channels:2,description:"Dual channel"},192:{channels:1,description:"Single channel (Mono)"}};class _e extends ce{static getHeader(e,t){const i={};if(e.length<4)return new _e(i,!1);const s=re.getKey(e.subarray(0,4)),a=t.getHeader(s);if(a)return new _e(a,!0);if(255!==e[0]||e[1]<224)return null;const r=24&e[1],n=6&e[1],o=1&e[1];i.length=4;const c=ue[r];if("reserved"===c.description)return null;if("reserved"===de[n].description)return null;const h={...de[n],...de[n][c.layers]};i.mpegVersion=c.description,i.layer=h.description,i.samples=h.samples,i.protection=me[o];const l=240&e[2],d=12&e[2],u=2&e[2],m=1&e[2];if(i.bitrate=he[l][h.bitrateIndex],"bad"===i.bitrate)return null;if(i.sampleRate=c.sampleRates[d],"reserved"===i.sampleRate)return null;if(i.framePadding=u>>1&&h.framePadding,i.isPrivate=!!m,i.frameLength=Math.floor(125*i.bitrate*i.samples/i.sampleRate+i.framePadding),!i.frameLength)return null;const g=192&e[3],p=48&e[3],_=8&e[3],f=4&e[3],y=3&e[3];if(i.channelMode=pe[g].description,i.channels=pe[g].channels,i.modeExtension=h.modeExtensions[p],i.isCopyrighted=!!(_>>3),i.isOriginal=!!(f>>2),i.emphasis=ge[y],"reserved"===i.emphasis)return null;i.bitDepth=16;const{length:b,frameLength:v,samples:S,...w}=i;return t.setHeader(s,i,w),new _e(i,!0)}constructor(e,t){super(e,t),this.bitrate=e.bitrate,this.channelMode=e.channelMode,this.emphasis=e.emphasis,this.framePadding=e.framePadding,this.isCopyrighted=e.isCopyrighted,this.isOriginal=e.isOriginal,this.isPrivate=e.isPrivate,this.layer=e.layer,this.modeExtension=e.modeExtension,this.mpegVersion=e.mpegVersion,this.protection=e.protection}}class fe extends oe{constructor(e,t){const i=_e.getHeader(e,t);super(i,i&&e.subarray(0,se.get(i).frameLength),i&&se.get(i).samples)}}class ye extends ne{constructor(e,t){super(e),this.Frame=fe,this._maxHeaderLength=4,t(this.codec)}get codec(){return"mpeg"}parseFrames(e){return this.fixedLengthFrameSync(e)}}const be={0:"MPEG-4",8:"MPEG-2"},ve={0:"valid",2:"bad",4:"bad",6:"bad"},Se={0:"16bit CRC",1:"none"},we={0:"AAC Main",64:"AAC LC (Low Complexity)",128:"AAC SSR (Scalable Sample Rate)",192:"AAC LTP (Long Term Prediction)"},Me={0:96e3,4:88200,8:64e3,12:48e3,16:44100,20:32e3,24:24e3,28:22050,32:16e3,36:12e3,40:11025,44:8e3,48:7350,52:"reserved",56:"reserved",60:"frequency is written explicitly"},xe={0:{channels:0,description:"Defined in AOT Specific Config"},64:{channels:1,description:"front-center"},128:{channels:2,description:"front-left, front-right"},192:{channels:3,description:"front-center, front-left, front-right"},256:{channels:4,description:"front-center, front-left, front-right, back-center"},320:{channels:5,description:"front-center, front-left, front-right, back-left, back-right"},384:{channels:6,description:"front-center, front-left, front-right, back-left, back-right, LFE-channel"},448:{channels:8,description:"front-center, front-left, front-right, side-left, side-right, back-left, back-right, LFE-channel"}};class Be extends ce{static getHeader(e,t){const i={};if(e.length<7)return new Be(i,!1);const s=re.getKey([e[0],e[1],e[2],111111100&e[3]]),a=t.getHeader(s);if(a)Object.assign(i,a);else{if(255!==e[0]||e[1]<240)return null;const t=8&e[1],s=6&e[1],a=1&e[1];if(i.mpegVersion=be[t],i.layer=ve[s],"bad"===i.layer)return null;i.protection=Se[a],i.length=a?7:9,i.profileBits=192&e[2],i.sampleRateBits=60&e[2];const r=2&e[2];if(i.profile=we[i.profileBits],i.sampleRate=Me[i.sampleRateBits],"reserved"===i.sampleRate)return null;i.isPrivate=!!(r>>1),i.channelModeBits=448&new DataView(Uint8Array.of(e[2],e[3]).buffer).getUint16(),i.channelMode=xe[i.channelModeBits].description,i.channels=xe[i.channelModeBits].channels;const n=32&e[3],o=8&e[3],c=8&e[3],h=4&e[3];i.isOriginal=!!(n>>5),i.isHome=!!(o>>4),i.copyrightId=!!(c>>3),i.copyrightIdStart=!!(h>>2),i.bitDepth=16}const r=262112&new DataView(Uint8Array.of(0,e[3],e[4],e[5]).buffer).getUint32();if(i.frameLength=r>>5,!i.frameLength)return null;const n=8188&new DataView(Uint8Array.of(e[5],e[6]).buffer).getUint16();if(i.bufferFullness=8188===n?"VBR":n>>2,i.numberAACFrames=3&e[6],i.samples=1024,!a){const{length:e,channelModeBits:a,profileBits:r,sampleRateBits:n,frameLength:o,bufferFullness:c,numberAACFrames:h,samples:l,...d}=i;t.setHeader(s,i,d)}return new Be(i,!0)}constructor(e,t){super(e,t),this.copyrightId=e.copyrightId,this.copyrightIdStart=e.copyrightIdStart,this.channelMode=e.channelMode,this.bufferFullness=e.bufferFullness,this.isHome=e.isHome,this.isOriginal=e.isOriginal,this.isPrivate=e.isPrivate,this.layer=e.layer,this.length=e.length,this.mpegVersion=e.mpegVersion,this.numberAACFrames=e.numberAACFrames,this.profile=e.profile,this.protection=e.protection}get audioSpecificConfig(){const e=se.get(this),t=e.profileBits+64<<5|e.sampleRateBits<<5|e.channelModeBits>>3,i=new Uint8Array(2);return new DataView(i.buffer).setUint16(0,t,!1),i}}class ke extends oe{constructor(e,t){const i=Be.getHeader(e,t);super(i,i&&e.subarray(0,se.get(i).frameLength),i&&se.get(i).samples)}}class Ce extends ne{constructor(e,t){super(e),this.Frame=ke,this._maxHeaderLength=9,t(this.codec)}get codec(){return"aac"}parseFrames(e){return this.fixedLengthFrameSync(e)}}class Ee{static getHeader(e){const t={};if(e.length<28)return new Ee(t,!1);const i=new DataView(Uint8Array.of(...e.subarray(0,28)).buffer);if(1332176723!==i.getUint32(0))return null;t.streamStructureVersion=e[4];const s=248&e[5],a=4&e[5],r=2&e[5],n=1&e[5];if(s)return null;t.isContinuedPacket=!!(a>>2),t.isFirstPage=!!(r>>1),t.isLastPage=!!n;try{t.absoluteGranulePosition=i.getBigInt64(6,!0)}catch{}t.streamSerialNumber=i.getInt32(14,!0),t.pageSequenceNumber=i.getInt32(18,!0),t.pageChecksum=i.getInt32(22,!0);const o=e[26];if(t.length=o+27,t.length>e.length)return new Ee(t,!1);t.frameLength=0,t.pageSegmentTable=[],t.pageSegmentBytes=e.subarray(27,t.length);let c=0;for(const e of t.pageSegmentBytes)t.frameLength+=e,c+=e,255!==e&&(t.pageSegmentTable.push(c),c=0);return new Ee(t,!0)}constructor(e,t){se.set(this,e),ie.set(this,t),this.absoluteGranulePosition=e.absoluteGranulePosition,this.isContinuedPacket=e.isContinuedPacket,this.isFirstPage=e.isFirstPage,this.isLastPage=e.isLastPage,this.pageSegmentTable=e.pageSegmentTable,this.pageSequenceNumber=e.pageSequenceNumber,this.pageChecksum=e.pageChecksum,this.streamSerialNumber=e.streamSerialNumber}}class Ie extends oe{constructor(e){const t=Ee.getHeader(e),i=se.get(t);if(super(t,t?e.subarray(i.length,i.length+i.frameLength):[]),ie.get(t)){let s=i.length;this.segments=t.pageSegmentTable.map(t=>{const i=e.subarray(s,s+t);return s+=t,i}),this.length=i.length+i.frameLength,ae.set(this,{length:this.length})}}}const Te={0:"Fixed",1:"Variable"},Re={0:"reserved",16:192,32:576,48:1152,64:2304,80:4608,96:"8-bit (blocksize-1) end of header",112:"16-bit (blocksize-1) end of header",128:256,144:512,160:1024,176:2048,192:4096,208:8192,224:16384,240:32768},Pe={0:"invalid",1:88200,2:176400,3:192e3,4:8e3,5:16e3,6:22050,7:24e3,8:32e3,9:44100,10:48e3,11:96e3,12:"get 8 bit sample rate (in kHz) from end of header",13:"get 16 bit sample rate (in Hz) from end of header",14:"get 16 bit sample rate (in tens of Hz) from end of header",15:"invalid"},De={0:{channels:1,description:"mono"},16:{channels:2,description:"left, right"},32:{channels:3,description:"left, right, center"},48:{channels:4,description:"front left, front right, back left, back right"},64:{channels:5,description:"front left, front right, front center, back/surround left, back/surround right"},80:{channels:6,description:"front left, front right, front center, LFE, back/surround left, back/surround right"},96:{channels:7,description:"front left, front right, front center, LFE, back center, side left, side right"},112:{channels:8,description:"front left, front right, front center, LFE, back left, back right, side left, side right"},128:{channels:2,description:"left/side stereo: channel 0 is the left channel, channel 1 is the side(difference) channel"},144:{channels:2,description:"right/side stereo: channel 0 is the side(difference) channel, channel 1 is the right channel"},160:{channels:2,description:"mid/side stereo: channel 0 is the mid(average) channel, channel 1 is the side(difference) channel"},176:"reserved",192:"reserved",208:"reserved",224:"reserved",240:"reserved"},Le={0:"get from STREAMINFO metadata block",2:8,4:12,6:"reserved",8:16,10:20,12:24,14:"reserved"};class Ae extends ce{static decodeUTF8Int(e){if(e[0]<128)return{value:e[0],next:1};if(255===e)return null;let t,i=2,s=224;for(;(e[0]&s)!=(s<<1&255)&&i<7;)i++,s|=s>>1;if(7===i)return null;const a=6*(i-1);t=e[0]&(255^s)<<a;for(let s=1;s<i;s++)t|=(63&e[s])<<a-6*s;return{value:t,next:i}}static getHeader(e,t){const i={};if(e.length<6)return new Ae(i,!1);const s=re.getKey(e.subarray(0,4)),a=t.getHeader(s);if(a)Object.assign(i,a);else{if(255!==e[0]||248!==e[1]&&249!==e[1])return null;i.length=2,i.blockingStrategyBits=1&e[1],i.blockingStrategy=Te[i.blockingStrategyBits],i.length++;const t=240&e[2],s=15&e[2];if(i.blockSize=Re[t],"reserved"===i.blockSize)return null;if(i.sampleRate=Pe[s],"invalid"===i.sampleRate)return null;if(i.length++,1&e[3])return null;const a=240&e[3],r=14&e[3],n=De[a];if("reserved"===n)return null;if(i.channels=n.channels,i.channelMode=n.description,i.bitDepth=Le[r],"reserved"===i.bitDepth)return null}if(i.length=5,e.length<i.length+8)return new Ae(i,!1);const r=Ae.decodeUTF8Int(e.subarray(4));if(!r)return null;if(i.blockingStrategyBits?i.sampleNumber=r.value:i.frameNumber=r.value,i.length+=r.next,"string"==typeof i.blockSize)if(96===blockSizeBits){if(e.length<i.length)return new Ae(i,!1);i.blockSize=e[i.length-1]-1,i.length+=1}else if(112===blockSizeBits){if(e.length<=i.length)return new Ae(i,!1);i.blockSize=(e[i.length-1]<<8)+e[i.length]-1,i.length+=2}if(i.samples=i.blockSize,"string"==typeof i.sampleRate)if(12===sampleRateBits){if(e.length<i.length)return new Ae(i,!1);i.sampleRate=e[i.length-1]-1,i.length+=1}else if(13===sampleRateBits){if(e.length<=i.length)return new Ae(i,!1);i.sampleRate=(e[i.length-1]<<8)+e[i.length]-1,i.length+=2}else if(14===sampleRateBits){if(e.length<=i.length)return new Ae(i,!1);i.sampleRate=(e[i.length-1]<<8)+e[i.length]-1,i.length+=2}if(e.length<i.length)return new Ae(i,!1);if(i.crc=e[i.length-1],i.crc!==(e=>{let t;for(const i of e)t=255&X[255&(t^i)];return t})(e.subarray(0,i.length-1)))return null;if(!a){const{blockingStrategyBits:e,frameNumber:a,sampleNumber:r,samples:n,crc:o,length:c,...h}=i;t.setHeader(s,i,h)}return i}constructor(e,t){super(e,t),this.channelMode=e.channelMode,this.blockingStrategy=e.blockingStrategy,this.blockSize=e.blockSize,this.frameNumber=e.frameNumber,this.sampleNumber=e.sampleNumber,this.streamInfo=void 0}}class Fe extends oe{constructor(e,t,i){const s=new Ae(t,!0);s&&(s.streamInfo=i),super(s,e,s&&se.get(s).samples)}}class Ne extends ne{constructor(e){super(e),this.Frame=Fe}get codec(){return"flac"}parseFrames(e){return 0===e.header.pageSequenceNumber?(this._headerCache.enable(),this._streamInfo=e.data.subarray(13),{frames:[],remainingData:0}):1===e.header.pageSequenceNumber?{frames:[],remainingData:0}:{frames:e.segments.filter(e=>255===e[0]).map(e=>new Fe(e,Ae.getHeader(e,this._headerCache),this._streamInfo)),remainingData:0}}}const ze={0:["monophonic (mono)","stereo (left, right)"],1:["monophonic (mono)","stereo (left, right)","linear surround (left, center, right)","quadraphonic (front left, front right, rear left, rear right)","5.0 surround (front left, front center, front right, rear left, rear right)","5.1 surround (front left, front center, front right, rear left, rear right, LFE)","6.1 surround (front left, front center, front right, side left, side right, rear center, LFE)","7.1 surround (front left, front center, front right, side left, side right, rear left, rear right, LFE)"]};class Ue extends ce{static getHeader(e,t){const i={};if(e.length<19)return new Ue(i,!1);const s=re.getKey(e.subarray(0,19)),a=t.getHeader(s);if(a)Object.assign(i,a);else{if(79!==e[0]||112!==e[1]||117!==e[2]||115!==e[3]||72!==e[4]||101!==e[5]||97!==e[6]||100!==e[7])return null;if(1!==e[8])return null;const t=new DataView(Uint8Array.of(...e.subarray(0,19)).buffer);if(i.bitDepth=16,i.length=19,i.channels=e[9],i.preSkip=t.getUint16(10,!0),i.inputSampleRate=t.getUint32(12,!0),i.sampleRate=48e3,i.outputGain=t.getInt16(16,!0),i.channelMappingFamily=e[18],!i.channelMappingFamily in ze)return null;if(i.channelMode=ze[i.channelMappingFamily][i.channels-1],!i.channelMode)return null}if(0!==i.channelMappingFamily){if(i.length+=2+i.channels,e.length<i.length)return new Ue(i,!1);i.streamCount=e[19],i.coupledStreamCount=e[20],i.channelMappingTable=e.subarray(21,i.channels+21)}if(i.data=Uint8Array.of(...e.subarray(0,i.length)),!a){const{length:e,data:a,channelMappingFamily:r,...n}=i;t.setHeader(s,i,n)}return new Ue(i,!0)}constructor(e,t){super(e,t),this.data=e.data,this.channelMappingFamily=e.channelMappingFamily,this.channelMode=e.channelMode,this.coupledStreamCount=e.coupledStreamCount,this.preSkip=e.preSkip,this.outputGain=e.outputGain,this.inputSampleRate=e.inputSampleRate,this.streamCount=e.streamCount,this.channelMappingTable=e.channelMappingTable}}const Oe={0:{mode:"SILK-only",bandwidth:"NB",frameSize:10},8:{mode:"SILK-only",bandwidth:"NB",frameSize:20},16:{mode:"SILK-only",bandwidth:"NB",frameSize:40},24:{mode:"SILK-only",bandwidth:"NB",frameSize:60},32:{mode:"SILK-only",bandwidth:"MB",frameSize:10},40:{mode:"SILK-only",bandwidth:"MB",frameSize:20},48:{mode:"SILK-only",bandwidth:"MB",frameSize:40},56:{mode:"SILK-only",bandwidth:"MB",frameSize:60},64:{mode:"SILK-only",bandwidth:"WB",frameSize:10},72:{mode:"SILK-only",bandwidth:"WB",frameSize:20},80:{mode:"SILK-only",bandwidth:"WB",frameSize:40},88:{mode:"SILK-only",bandwidth:"WB",frameSize:60},96:{mode:"Hybrid",bandwidth:"SWB",frameSize:10},104:{mode:"Hybrid",bandwidth:"SWB",frameSize:20},112:{mode:"Hybrid",bandwidth:"FB",frameSize:10},120:{mode:"Hybrid",bandwidth:"FB",frameSize:20},128:{mode:"CELT-only",bandwidth:"NB",frameSize:2.5},136:{mode:"CELT-only",bandwidth:"NB",frameSize:5},144:{mode:"CELT-only",bandwidth:"NB",frameSize:10},152:{mode:"CELT-only",bandwidth:"NB",frameSize:20},160:{mode:"CELT-only",bandwidth:"WB",frameSize:2.5},168:{mode:"CELT-only",bandwidth:"WB",frameSize:5},176:{mode:"CELT-only",bandwidth:"WB",frameSize:10},184:{mode:"CELT-only",bandwidth:"WB",frameSize:20},192:{mode:"CELT-only",bandwidth:"SWB",frameSize:2.5},200:{mode:"CELT-only",bandwidth:"SWB",frameSize:5},208:{mode:"CELT-only",bandwidth:"SWB",frameSize:10},216:{mode:"CELT-only",bandwidth:"SWB",frameSize:20},224:{mode:"CELT-only",bandwidth:"FB",frameSize:2.5},232:{mode:"CELT-only",bandwidth:"FB",frameSize:5},240:{mode:"CELT-only",bandwidth:"FB",frameSize:10},248:{mode:"CELT-only",bandwidth:"FB",frameSize:20}};class Ve extends oe{static getPacket(e){const t={config:Oe[248&e[0]],channels:4&e[0]?2:1,code:3&e[0]};switch(t.code){case 0:return t.frameCount=1,t;case 1:case 2:return t.frameCount=2,t;case 3:return t.isVbr=Boolean(128&e[1]),t.hasOpusPadding=Boolean(64&e[1]),t.frameCount=63&e[1],t}}constructor(e,t){let i=new Ue(t,!0);const s=Ve.getPacket(e);super(i,e,i&&s.config.frameSize*s.frameCount/1e3*i.sampleRate)}}class He extends ne{constructor(e,t){super(e),this.Frame=Ve,this._identificationHeader=null,this._maxHeaderLength=26}get codec(){return"opus"}parseFrames(e){return 0===e.header.pageSequenceNumber?(this._headerCache.enable(),this._identificationHeader=Ue.getHeader(e.data,this._headerCache),{frames:[],remainingData:0}):1===e.header.pageSequenceNumber?{frames:[],remainingData:0}:{frames:e.segments.map(e=>new Ve(e,this._identificationHeader)),remainingData:0}}}class $e extends oe{constructor(e,t,i){super(t,e,i)}}const je={6:64,7:128,8:256,9:512,10:1024,11:2048,12:4096,13:8192};class qe extends ce{static getHeader(e,t){const i={length:30};if(e.length<30)return new qe(i,!1);const s=re.getKey(e.subarray(0,30)),a=t.getHeader(s);if(a)return new qe(a,!0);if(1!==e[0]||118!==e[1]||111!==e[2]||114!==e[3]||98!==e[4]||105!==e[5]||115!==e[6])return null;i.data=Uint8Array.of(...e.subarray(0,30));const r=new DataView(i.data.buffer);if(i.version=r.getUint32(7,!0),0!==i.version)return null;if(i.channels=e[11],i.sampleRate=r.getUint32(12,!0),i.bitrateMaximum=r.getInt32(16,!0),i.bitrateNominal=r.getInt32(20,!0),i.bitrateMinimum=r.getInt32(24,!0),i.blocksize1=je[(240&e[28])>>4],i.blocksize0=je[15&e[28]],e[!0])return null;i.bitDepth=32;{const{length:e,data:a,version:r,...n}=i;t.setHeader(s,i,n)}return new qe(i,!0)}constructor(e,t){super(e,t),this.bitrateMaximum=e.bitrateMaximum,this.bitrateMinimum=e.bitrateMinimum,this.bitrateNominal=e.bitrateNominal,this.blocksize0=e.blocksize0,this.blocksize1=e.blocksize1,this.data=e.data,this.vorbisComments=void 0,this.vorbisSetup=void 0}}class Ge extends ne{constructor(e){super(e),this.Frame=$e,this._maxHeaderLength=29,this._identificationHeader=null,this._mode={count:0},this._prevBlockSize=0,this._currBlockSize=0}get codec(){return"vorbis"}parseFrames(e){return 0===e.header.pageSequenceNumber?(this._headerCache.enable(),this._identificationHeader=qe.getHeader(e.data,this._headerCache),{frames:[],remainingData:0}):1===e.header.pageSequenceNumber?(this._identificationHeader.vorbisComments=e.segments[0],this._identificationHeader.vorbisSetup=e.segments[1],this._mode=this._parseSetupHeader(e.segments[1]),{frames:[],remainingData:0}):{frames:e.segments.map(e=>new $e(e,this._identificationHeader,this._getSamples(e))),remainingData:0}}_getSamples(e){const t=e[0]>>1,i=this._mode[t&this._mode.mask];i&&(this._prevBlockSize=t&this._mode.prevMask?this._identificationHeader.blocksize1:this._identificationHeader.blocksize0),this._currBlockSize=i?this._identificationHeader.blocksize1:this._identificationHeader.blocksize0;const s=this._prevBlockSize+this._currBlockSize>>2;return this._prevBlockSize=this._currBlockSize,s}_parseSetupHeader(e){const t=new te(e);let i,s={count:0};for(;1!=(1&t.read(1)););for(;s.count<64&&t.position>0;){const e=ee(t.read(8));if(e in s&&(1!==s.count||0!==e))throw K("received duplicate mode mapping, failed to parse vorbis modes"),new Error("Failed to read Vorbis stream");let a=0;for(;0===t.read(8)&&a++<3;);if(4!==a){if(1+((126&ee(i))>>1)!==s.count)throw K("mode count did not match actual modes, failed to parse vorbis modes"),new Error("Failed to read Vorbis stream");break}i=t.read(7),s[e]=1&i,t.position+=6,s.count++}return s.mask=(1<<Math.log2(s.count))-1,s.prevMask=1+(1|s.mask),s}}class Qe extends ne{constructor(e,t){super(),this._onCodecUpdate=e,this._onCodec=t,this.Frame=Ie,this._maxHeaderLength=283,this._codec=null}get codec(){return this._codec||""}_updateCodec(e,t){this._codec!==e&&(this._parser=new t(this._onCodecUpdate),this._codec=e,this._onCodec(e))}checkForIdentifier({data:e}){const t=String.fromCharCode(...e.subarray(0,8));switch(t){case"fishead\0":case"fisbone\0":return!1;case"OpusHead":return this._updateCodec("opus",He),!0;case/^\x7fFLAC/.test(t)&&t:return this._updateCodec("flac",Ne),!0;case/^\x01vorbis/.test(t)&&t:return this._updateCodec("vorbis",Ge),!0;default:return!0}}parseFrames(e){const t=this.fixedLengthFrame(e);return{frames:t.frames.filter(e=>this.checkForIdentifier(e)&&this._codec).flatMap(e=>this._parser.parseFrames(e).frames),remainingData:t.remainingData}}}const We=()=>{};var Ke=class{constructor(e,{onCodecUpdate:t,onCodec:i}={}){if(this._inputMimeType=e,this._onCodecUpdate=t||We,this._onCodec=i||We,this._inputMimeType.match(/aac/))this._codecParser=new Ce(this._onCodecUpdate,this._onCodec);else if(this._inputMimeType.match(/mpeg/))this._codecParser=new ye(this._onCodecUpdate,this._onCodec);else{if(!this._inputMimeType.match(/ogg/))throw new Error("Unsupported Codec "+e);this._codecParser=new Qe(this._onCodecUpdate,this._onCodec)}this._frameNumber=0,this._totalBytesOut=0,this._totalSamples=0,this._frames=[],this._codecData=new Uint8Array(0),this._generator=this._generator(),this._generator.next()}get codec(){return this._codecParser.codec}*iterator(e){for(let t=this._generator.next(e);t.value;t=this._generator.next())yield t.value}*_generator(){let e=[];for(;;)yield*this._sendReceiveData(e),e=this._parseFrames()}*_sendReceiveData(e){for(const t of e)yield t;let t;do{t=yield}while(!t);this._codecData=((...e)=>{const t=new Uint8Array(e.reduce((e,t)=>e+t.length,0));return e.reduce((e,i)=>(t.set(i,e),e+i.length),0),t})(this._codecData,t)}_parseFrames(){const{frames:e,remainingData:t}=this._codecParser.parseFrames(this._codecData);return this._codecData=this._codecData.subarray(t),e.map(e=>(e.frameNumber=this._frameNumber++,e.totalBytesOut=this._totalBytesOut,e.totalSamples=this._totalSamples,e.totalDuration=this._totalSamples/e.header.sampleRate*1e3,e.crc32=(e=>{let t;for(const i of e)t=J[255&(t^i)]^t>>>8;return-1^t})(e.data),this._totalBytesOut+=e.data.length,this._totalSamples+=e.samples,e))}};class Ye{constructor({name:e,contents:t=[],children:i=[]}){this._name=e,this._contents=t,this._children=i}static stringToByteArray(e){return[...e].map(e=>e.charCodeAt(0))}static getFloat64(e){const t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e),t}static getUint64(e){const t=new Uint8Array(8);return new DataView(t.buffer).setBigUint64(0,BigInt(e)),t}static getUint32(e){const t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e),t}static getUint16(e){const t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e),t}static getInt16(e){const t=new Uint8Array(2);return new DataView(t.buffer).setInt16(0,e),t}static*flatten(e){for(const t of e)Array.isArray(t)?yield*Ye.flatten(t):yield t}get contents(){const e=new Uint8Array(this.length),t=this._buildContents();let i=0;for(const s of Ye.flatten(t))"object"!=typeof s?(e[i]=s,i++):(e.set(s,i),i+=s.length);return e}get length(){return this._buildLength()}_buildContents(){return[this._contents,...this._children.map(e=>e._buildContents())]}_buildLength(){let e;return e=Array.isArray(this._contents)?this._contents.reduce((e,t)=>e+(void 0===t.length?1:t.length),0):void 0===this._contents.length?1:this._contents.length,e+this._children.reduce((e,t)=>e+t.length,0)}addChild(e){this._children.push(e)}}class Xe extends Ye{constructor(e,{contents:t,children:i}={}){super({name:e,contents:t,children:i})}_buildContents(){return[...this._lengthBytes,...Ye.stringToByteArray(this._name),...super._buildContents()]}_buildLength(){return this._length||(this._length=4+this._name.length+super._buildLength(),this._lengthBytes=Ye.getUint32(this._length)),this._length}}class Je extends Ye{constructor(e,{contents:t,tags:i}={}){super({name:e,contents:t,children:i})}static getLength(e){const t=Ye.getUint32(e);return t.every((e,t,i)=>0===e&&(i[t]=128,!0)),t}_buildContents(){return[this._name,...this._lengthBytes,...super._buildContents()]}_buildLength(){if(!this._length){const e=super._buildLength();this._lengthBytes=Je.getLength(e),this._length=1+e+this._lengthBytes.length}return this._length}addTag(e){this.addChild(e)}}class Ze{constructor(e){this._codec=e}getCodecBox(e){switch(this._codec){case"mp3":return this.getMp4a(e,107);case"mp4a.40.2":return this.getMp4a(e,64);case"opus":return this.getOpus(e);case"flac":return this.getFlaC(e)}}getOpus(e){return new Xe("Opus",{contents:[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channels,0,e.bitDepth,0,0,0,0,Xe.getUint16(e.sampleRate),0,0],children:[new Xe("dOps",{contents:[0,e.channels,Xe.getUint16(e.preSkip),Xe.getUint32(e.inputSampleRate),Xe.getInt16(e.outputGain),e.channelMappingFamily,0!==e.channelMappingFamily?[e.streamCount,e.coupledStreamCount,e.channelMappingTable]:[]]})]})}getFlaC(e){return new Xe("fLaC",{contents:[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channels,0,e.bitDepth,0,0,0,0,Xe.getUint16(e.sampleRate),0,0],children:[new Xe("dfLa",{contents:[0,0,0,0,...e.streamInfo||[128,0,0,34,Xe.getUint16(e.blockSize),Xe.getUint16(e.blockSize),0,0,0,0,0,0,Xe.getUint32(e.sampleRate<<12|e.channels<<8|e.bitDepth-1<<4),0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]})]})}getMp4a(e,t){const i=new Je(4,{contents:[t,21,0,0,0,0,0,0,0,0,0,0,0]});return 64===t&&i.addTag(new Je(5,{contents:e.audioSpecificConfig})),new Xe("mp4a",{contents:[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channels,0,16,0,0,0,0,Xe.getUint16(e.sampleRate),0,0],children:[new Xe("esds",{contents:[0,0,0,0],children:[new Je(3,{contents:[0,1,0],tags:[i,new Je(6,{contents:2})]})]})]})}getInitializationSegment({header:e,samples:t}){return new Ye({children:[new Xe("ftyp",{contents:[Xe.stringToByteArray("iso5"),0,0,2,0,Xe.stringToByteArray("iso6mp41")]}),new Xe("moov",{children:[new Xe("mvhd",{contents:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2]}),new Xe("trak",{children:[new Xe("tkhd",{contents:[0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0]}),new Xe("mdia",{children:[new Xe("mdhd",{contents:[0,0,0,0,0,0,0,0,0,0,0,0,Xe.getUint32(e.sampleRate),0,0,0,0,85,196,0,0]}),new Xe("hdlr",{contents:[0,0,0,0,Xe.stringToByteArray("mhlr"),Xe.stringToByteArray("soun"),0,0,0,0,0,0,0,0,0,0,0,0,0]}),new Xe("minf",{children:[new Xe("stbl",{children:[new Xe("stsd",{contents:[0,0,0,0,0,0,0,1],children:[this.getCodecBox(e)]}),new Xe("stts",{contents:[0,0,0,0,0,0,0,0]}),new Xe("stsc",{contents:[0,0,0,0,0,0,0,0]}),new Xe("stsz",{contents:[0,0,0,0,0,0,0,0,0,0,0,0]}),new Xe("stco",{contents:[0,0,0,0,0,0,0,0]})]})]})]})]}),new Xe("mvex",{children:[new Xe("trex",{contents:[0,0,0,0,0,0,0,1,0,0,0,1,Xe.getUint32(t),0,0,0,0,0,0,0,0]})]})]})]}).contents}getSamplesPerFrame(e){return"mp4a.40.2"===this._codec?e.map(({data:e,header:t})=>Xe.getUint32(e.length-t.length)):e.map(({data:e})=>Xe.getUint32(e.length))}getFrameData(e){return"mp4a.40.2"===this._codec?e.map(({data:e,header:t})=>e.subarray(t.length)):e.map(({data:e})=>e)}getMediaSegment(e){return new Ye({children:[new Xe("moof",{children:[new Xe("mfhd",{contents:[0,0,0,0,0,0,0,0]}),new Xe("traf",{children:[new Xe("tfhd",{contents:[0,2,0,0,0,0,0,1]}),new Xe("tfdt",{contents:[0,0,0,0,0,0,0,0]}),new Xe("trun",{contents:[0,0,2,1,Xe.getUint32(e.length),Xe.getUint32(92+4*e.length),...this.getSamplesPerFrame(e)]})]})]}),new Xe("mdat",{contents:this.getFrameData(e)})]}).contents}}const et=(...e)=>e.flatMap(e=>{const t=[];for(let i=e.length;i>=0;i-=255)t.push(i>=255?255:i);return t});class tt extends Ye{constructor(e,{contents:t,children:i,isUnknownLength:s=!1}={}){super({name:e,contents:t,children:i}),this._isUnknownLength=s}static getUintVariable(e){let t;if(e<127)t=[128|e];else if(e<16383)t=Ye.getUint16(e),t[0]|=64;else if(e<2097151)t=Ye.getUint32(e).subarray(1),t[0]|=32;else if(e<268435455)t=Ye.getUint32(e),t[0]|=16;else if(e<34359738367)t=Ye.getUint64(e).subarray(3),t[0]|=8;else if(e<4398046511103)t=Ye.getUint64(e).subarray(2),t[0]|=4;else if(e<562949953421311)t=Ye.getUint64(e).subarray(1),t[0]|=2;else if(e<72057594037927940)t=Ye.getUint64(e),t[0]|=1;else if("number"!=typeof e||isNaN(e))throw((...e)=>{console.error("mse-audio-wrapper",e.reduce((e,t)=>e+"\n  "+t,""))})("EBML Variable integer must be a number, instead received "+e),new Error("mse-audio-wrapper: Unable to encode WEBM");return t}_buildContents(){return[...this._name,...this._lengthBytes,...super._buildContents()]}_buildLength(){return this._length||(this._contentLength=super._buildLength(),this._lengthBytes=this._isUnknownLength?[1,255,255,255,255,255,255,255]:tt.getUintVariable(this._contentLength),this._length=this._name.length+this._lengthBytes.length+this._contentLength),this._length}}const it=[225],st=[98,100],at=[159],rt=[31,67,182,117],nt=[86,170],ot=[134],ct=[99,162],ht=[66,130],lt=[66,133],dt=[66,135],ut=[26,69,223,163],mt=[66,242],gt=[66,243],pt=[66,247],_t=[66,134],ft=[156],yt=[21,73,169,102],bt=[77,128],vt=[181],St=[86,187],wt=[24,83,128,103],Mt=[163],xt=[231],Bt=[42,215,177],kt=[174],Ct=[215],Et=[22,84,174,107],It=[131],Tt=[115,197],Rt=[87,65];class Pt{constructor(e){switch(e){case"opus":this._codecId="A_OPUS",this._getCodecSpecificTrack=e=>[new tt(nt,{contents:tt.getUint32(Math.round(e.preSkip*this._timestampScale))}),new tt(St,{contents:tt.getUint32(Math.round(3840*this._timestampScale))}),new tt(ct,{contents:e.data})];break;case"vorbis":this._codecId="A_VORBIS",this._getCodecSpecificTrack=e=>[new tt(ct,{contents:[2,et(e.data,e.vorbisComments),e.data,e.vorbisComments,e.vorbisSetup]})]}}getInitializationSegment({header:e}){return this._timestampScale=1e9/e.sampleRate,new Ye({children:[new tt(ut,{children:[new tt(_t,{contents:1}),new tt(pt,{contents:1}),new tt(mt,{contents:4}),new tt(gt,{contents:8}),new tt(ht,{contents:tt.stringToByteArray("webm")}),new tt(dt,{contents:4}),new tt(lt,{contents:2})]}),new tt(wt,{isUnknownLength:!0,children:[new tt(yt,{children:[new tt(Bt,{contents:tt.getUint32(Math.floor(this._timestampScale))}),new tt(bt,{contents:tt.stringToByteArray("mse-audio-wrapper")}),new tt(Rt,{contents:tt.stringToByteArray("mse-audio-wrapper")})]}),new tt(Et,{children:[new tt(kt,{children:[new tt(Ct,{contents:1}),new tt(Tt,{contents:1}),new tt(ft,{contents:0}),new tt(ot,{contents:tt.stringToByteArray(this._codecId)}),new tt(It,{contents:2}),new tt(it,{children:[new tt(at,{contents:e.channels}),new tt(vt,{contents:tt.getFloat64(e.sampleRate)}),new tt(st,{contents:e.bitDepth})]}),...this._getCodecSpecificTrack(e)]})]})]})]}).contents}getMediaSegment(e){const t=e[0].totalSamples;return new tt(rt,{children:[new tt(xt,{contents:tt.getUintVariable(t)}),...e.map(({data:e,totalSamples:i})=>new tt(Mt,{contents:[129,tt.getInt16(i-t),128,e]}))]}).contents}}const Dt=()=>{};var Lt=class{constructor(e,t={}){this._inputMimeType=e,this.PREFERRED_CONTAINER=t.preferredContainer||"webm",this.MIN_FRAMES=t.minFramesPerSegment||4,this.MAX_FRAMES=t.maxFramesPerSegment||50,this.MIN_FRAMES_LENGTH=t.minBytesPerSegment||1022,this.MAX_SAMPLES_PER_SEGMENT=1/0,this._onMimeType=t.onMimeType||Dt,t.codec&&(this._container=this._getContainer(t.codec),this._onMimeType(this._mimeType)),this._frames=[],this._codecParser=new Ke(e,{onCodec:e=>{this._container=this._getContainer(e),this._onMimeType(this._mimeType)},onCodecUpdate:t.onCodecUpdate})}get mimeType(){return this._mimeType}get inputMimeType(){return this._inputMimeType}*iterator(e){e.constructor===Uint8Array?yield*this._processFrames([...this._codecParser.iterator(e)]):Array.isArray(e)&&(yield*this._processFrames(e))}*_processFrames(e){if(this._frames.push(...e),this._frames.length){const e=this._groupFrames();if(e.length){this._sentInitialSegment||(this._sentInitialSegment=!0,yield this._container.getInitializationSegment(e[0][0]));for(const t of e)yield this._container.getMediaSegment(t)}}}_groupFrames(){const e=[[]];let t=e[0],i=0;for(const s of this._frames)(t.length===this.MAX_FRAMES||i>=this.MAX_SAMPLES_PER_SEGMENT)&&(i=0,e.push(t=[])),t.push(s),i+=s.samples;return this._frames=t.length<this.MIN_FRAMES||t.reduce((e,t)=>e+t.data.length,0)<this.MIN_FRAMES_LENGTH?e.pop():[],e}_getContainer(e){switch(e){case"mpeg":return this._mimeType='audio/mp4;codecs="mp3"',new Ze("mp3");case"aac":return this._mimeType='audio/mp4;codecs="mp4a.40.2"',new Ze("mp4a.40.2");case"flac":return this._mimeType='audio/mp4;codecs="flac"',new Ze("flac");case"vorbis":return this._mimeType='audio/webm;codecs="vorbis"',this.MAX_SAMPLES_PER_SEGMENT=32767,new Pt("vorbis");case"opus":return"webm"===this.PREFERRED_CONTAINER?(this._mimeType='audio/webm;codecs="opus"',this.MAX_SAMPLES_PER_SEGMENT=32767,new Pt("opus")):(this._mimeType='audio/mp4;codecs="opus"',new Ze("opus"))}}};const At=Symbol(),Ft=Symbol(),Nt=Symbol();class zt extends Q{constructor(e){super(e),this.reset(),this._icecast.addEventListener(b,()=>{this._syncState=At})}static isSupported(){try{new MediaSource}catch{return!1}return!0}static canPlayType(e){const t={mpeg:['audio/mp4;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.2"'],aacp:['audio/mp4;codecs="mp4a.40.2"'],ogg:{flac:['audio/mp4;codecs="flac"'],opus:['audio/mp4;codecs="opus"','audio/webm;codecs="opus"'],vorbis:['audio/webm;codecs="vorbis"']}};if(!zt.isSupported())return"";if(MediaSource.isTypeSupported(e))return"probably";const i=e.match(/^(?:application\/|audio\/|)(?<mime>[a-zA-Z]+)(?:$|;[ ]*codecs=(?:\'|\")(?<codecs>[a-zA-Z,]+)(?:\'|\"))/);if(i){const{mime:e,codecs:s}=i.groups;if(t[e])return(Array.isArray(t[e])?t[e]:s?s.split(",").flatMap(i=>t[e][i]):Object.values(t[e]).flat()).reduce((e,t)=>MediaSource.isTypeSupported(t)?""===e?"maybe":"probably":e?"maybe":"",null)}return""}async reset(){this._syncState=Nt,this._frameQueue=new W(this._icecast),await this._createMediaSource()}get metadataTimestamp(){return this._mediaSource&&this._mediaSource.sourceBuffers.length&&Math.max(this._mediaSource.sourceBuffers[0].timestampOffset,this._mediaSource.sourceBuffers[0].buffered.length?this._mediaSource.sourceBuffers[0].buffered.end(0):0)||0}getOnStream(e){const t=e.headers.get("content-type"),i=this._prepareMediaSource(t);return async({stream:e})=>{let t=[...this._codecParser.iterator(e)];if(t.length){switch(this._syncState){case At:this._frameQueue.initSync(),this._syncState=Ft;case Ft:t=this._frameQueue.sync(t),t.length&&(this._syncState=Nt)}t.map(e=>this._frameQueue.push(e)),await(await i)(t)}}}async _prepareMediaSource(e){const t=new Promise(t=>{this._codecParser=new Ke(e,{onCodecUpdate:(...e)=>this._icecast[D](f,...e),onCodec:t})});if(MediaSource.isTypeSupported(e))return await this._createSourceBuffer(e),async e=>{for await(const{data:t}of e)await this._appendSourceBuffer(t)};{const i=new Lt(e,{codec:await t});if(!MediaSource.isTypeSupported(i.mimeType)){this._icecast[D](w,`Media Source Extensions API in your browser does not support ${e} or ${i.mimeType}`,"See: https://caniuse.com/mediasource and https://developer.mozilla.org/en-US/docs/Web/API/Media_Source_Extensions_API");const t=new Error("Unsupported Media Source Codec "+i.mimeType);throw t.name="CodecError",t}return await this._createSourceBuffer(i.mimeType),async e=>{for await(const t of i.iterator(e))await this._appendSourceBuffer(t)}}}async _createSourceBuffer(e){await this._mediaSourcePromise,this._mediaSource.sourceBuffers.length||(this._sourceBufferRemoved=0,this._mediaSource.addSourceBuffer(e).mode="sequence")}async _createMediaSource(){return this._mediaSourcePromise=new Promise(e=>{this._mediaSource=new MediaSource,this._audioElement.src=URL.createObjectURL(this._mediaSource),this._mediaSource.addEventListener("sourceopen",e,{once:!0})}),this._mediaSourcePromise}async _waitForSourceBuffer(){return new Promise(e=>{this._mediaSource.sourceBuffers[0].addEventListener("updateend",e,{once:!0})})}async _appendSourceBuffer(e){this._icecast[D](m,e),this._mediaSource.sourceBuffers.length||this._icecast[D](S,"Attempting to append audio, but MediaSource has not been or is no longer initialized","Please be sure that `detachAudioElement()` was called and awaited before reusing the element with a new IcecastMetadataPlayer instance"),this._icecast.state!==o&&this._mediaSource.sourceBuffers.length&&(this._mediaSource.sourceBuffers[0].appendBuffer(e),await this._waitForSourceBuffer(),this._audioElement.currentTime>10&&this._sourceBufferRemoved+1e4<Date.now()&&(this._sourceBufferRemoved=Date.now(),this._mediaSource.sourceBuffers[0].remove(0,this._audioElement.currentTime-10),await this._waitForSourceBuffer()))}}class Ut extends Q{constructor(e){super(e),this._frame=null,this._audioLoaded=0,this._offset=0,this._audioElement.crossOrigin="anonymous",this._audioElement.preload="none",this._audioElement.src=this._endpoint}static canPlayType(e){return(new Audio).canPlayType(e)}async reset(){this._icecast.state!==n&&(this._frame=null,this._audioLoaded=0,this._offset=0,this._audioElement.removeAttribute("src"),this._audioElement.load(),this._audioElement.src=this._endpoint)}async play(){const e=new Promise((e,t)=>{this._icecast.addEventListener(o,e,{once:!0}),this._audioElement.addEventListener("playing",e,{once:!0}),this._audioElement.addEventListener("error",t,{once:!0})});return this._audioElement.src=this._endpoint,this._audioElement.load(),this._metadataTypes.length?e.then(async()=>{const e=performance.now(),t=await super.play();return this._offset=performance.now()-e,t}):new Promise((e,t)=>{const i=()=>t(new DOMException("Aborted","AbortError")),s=a.get(this._icecast)[U];s.aborted?i():s.signal.addEventListener("abort",i,{once:!0})})}get metadataTimestamp(){return this._frame?(this._frame.totalDuration+this._offset)/1e3:0}getOnStream(e){return this._codecParser=new Ke(e.headers.get("content-type"),{onCodecUpdate:(...e)=>this._icecast[D](f,...e)}),({stream:e})=>{this._icecast[D](m,e);for(const t of this._codecParser.iterator(e))this._frame=t}}}let Ot;try{new EventTarget,Ot=EventTarget}catch{Ot=G}const Vt=Symbol(),Ht=Symbol(),$t=Symbol(),jt=Symbol(),qt=Symbol(),Gt=Symbol(),Qt=Symbol(),Wt=Symbol(),Kt=Symbol(),Yt=Symbol(),Xt=Symbol(),Jt=Symbol();class Zt extends Ot{constructor(e,t={}){super(),a.set(this,{[M]:e,[B]:t.audioElement||new Audio,[k]:t.icyMetaInt,[C]:t.icyDetectionTimeout,[x]:t.metadataTypes||["icy"],[N]:(t.metadataTypes||["icy"]).includes("icy"),[E]:t.enableLogging||!1,[I]:(t.retryDelayRate||.1)+1,[T]:1e3*(t.retryDelayMin||.5),[R]:1e3*(t.retryDelayMax||2),[P]:1e3*(t.retryTimeout||30),[$t]:{[l]:t.onPlay||s,[d]:t.onLoad||s,[u]:t.onStreamStart||s,[m]:t.onStream||s,[g]:t.onStreamEnd||s,[p]:t.onMetadata||s,[_]:t.onMetadataEnqueue||s,[f]:t.onCodecUpdate||s,[y]:t.onStop||s,[b]:t.onRetry||s,[v]:t.onRetryTimeout||s,[S]:(...e)=>{a.get(this)[E]&&console.warn("icecast-metadata-js",e.reduce((e,t)=>e+"\n  "+t,"")),t.onWarn&&t.onWarn(...e)},[w]:(...e)=>{a.get(this)[E]&&console.error("icecast-metadata-js",e.reduce((e,t)=>e+"\n  "+t,"")),t.onError&&t.onError(...e)}},[z]:new V.a({onMetadataUpdate:(...e)=>this[D](p,...e),onMetadataEnqueue:(...e)=>this[D](_,...e)}),[Yt]:()=>{clearTimeout(a.get(this)[Jt]),this.removeEventListener(u,a.get(this)[Yt]),a.get(this)[B].removeEventListener("waiting",a.get(this)[Kt]),this.state!==h&&(a.get(this)[B].pause(),a.get(this)[z].purgeMetadataQueue(),a.get(this)[Ht]=a.get(this)[Vt].reset())},[Gt]:()=>{this.play()},[qt]:()=>{this.stop()},[Qt]:()=>{this.state!==r&&this.state!==h||(a.get(this)[B].play(),this[jt]=n,this[D](l))},[Wt]:e=>{const t={1:"MEDIA_ERR_ABORTED The fetching of the associated resource was aborted by the user's request.",2:"MEDIA_ERR_NETWORK Some kind of network error occurred which prevented the media from being successfully fetched, despite having previously been available.",3:"MEDIA_ERR_DECODE Despite having previously been determined to be usable, an error occurred while trying to decode the media resource, resulting in an error.",4:"MEDIA_ERR_SRC_NOT_SUPPORTED The associated resource or media provider object (such as a MediaStream) has been found to be unsuitable.",5:"MEDIA_ERR_ENCRYPTED"};this.state!==h?(this[D](w,"The audio element encountered an error",t[e.target.error.code]||"Code: "+e.target.error.code,"Message: "+e.target.error.message),this.stop()):a.get(this)[Yt]()}}),this[A](),this[jt]=c,zt.isSupported()?a.get(this)[Vt]=new zt(this):(a.get(this)[Vt]=new Ut(this),this[D](S,"Media Source Extensions API in your browser is not supported. Using two requests, one for audio, and another for metadata.","See: https://caniuse.com/mediasource and https://developer.mozilla.org/en-US/docs/Web/API/Media_Source_Extensions_API"))}static canPlayType(e){return{mediasource:zt.canPlayType(e),html5:Ut.canPlayType(e)}}get audioElement(){return a.get(this)[B]}get icyMetaInt(){return a.get(this)[Vt].icyMetaInt}get metadataQueue(){return a.get(this)[z].metadataQueue}get state(){return a.get(this)[jt]}set[jt](e){this.dispatchEvent(new CustomEvent(e)),a.get(this)[jt]=e}[A](){const e=a.get(this)[B];e.addEventListener("pause",a.get(this)[qt]),e.addEventListener("play",a.get(this)[Gt]),e.addEventListener("canplay",a.get(this)[Qt]),e.addEventListener("error",a.get(this)[Wt])}async detachAudioElement(){const e=a.get(this)[B];e.removeEventListener("pause",a.get(this)[qt]),e.removeEventListener("play",a.get(this)[Gt]),e.removeEventListener("canplay",a.get(this)[Qt]),e.removeEventListener("error",a.get(this)[Wt]),await this.stop()}async play(){if(this.state===c){let e;a.get(this)[U]=new AbortController,this[jt]=r,this[D](d);const t=()=>a.get(this)[Vt].play().catch(async i=>{if("AbortError"!==i.name){if(await this[F](i))return this[D](b),t();a.get(this)[U].abort(),a.get(this)[jt]!==o&&a.get(this)[jt]!==c&&(this[D](w,i),e=i)}});t().finally(()=>{a.get(this)[Yt](),e&&!e.message.match(/network|fetch|offline/)&&this[L](),this[D](y),this[jt]=c}),await new Promise(e=>{this.addEventListener(l,e,{once:!0})})}}async stop(){this.state!==c&&this.state!==o&&(this[jt]=o,a.get(this)[U].abort(),await new Promise(e=>{this.addEventListener(y,e,{once:!0})}))}async[F](e){if(0===a.get(this)[P])return!1;if(a.get(this)[jt]===h)return await new Promise(e=>{this.addEventListener(o,e,{once:!0});const t=Math.min(a.get(this)[T]*a.get(this)[I]**a.get(this)[Xt]++,a.get(this)[R]);setTimeout(()=>{this.removeEventListener(o,e),e()},t+.3*t*Math.random())}),a.get(this)[jt]===h;if(a.get(this)[jt]!==o&&a.get(this)[jt]!==c&&(e.message.match(/network|fetch|offline|Error in body stream/i)||"HTTP Response Error"===e.name)){this[D](w,e),this[jt]=h,this.addEventListener(u,a.get(this)[Yt],{once:!0}),a.get(this)[N]&&this[D](S,"This stream was requested with ICY metadata.",'If there is a CORS preflight failure, try removing "icy" from the metadataTypes option.',"See https://github.com/eshaz/icecast-metadata-js#cors for more details.");const t=new Promise(e=>{a.get(this)[Kt]=e,a.get(this)[B].addEventListener("waiting",a.get(this)[Kt],{once:!0})});return a.get(this)[Jt]=setTimeout(()=>{t.then(()=>{a.get(this)[jt]===h&&(this[D](v),this.stop())})},a.get(this)[P]),a.get(this)[Xt]=0,!0}return!1}[D](e,...t){this.dispatchEvent(new CustomEvent(e,{detail:t})),a.get(this)[$t][e](...t)}[L](){this[D](w,"Falling back to HTML5 audio by using two requests: one for audio, and another for metadata.","See the console for details on the error."),a.get(this)[Vt]=new Ut(this),a.get(this)[Ht].then(()=>this.play())}}},263:function(e,t,i){"use strict";i.d(t,"a",(function(){return L}));i(233),i(146);var s=i(236),a=i.n(s);const r=()=>{},n=new WeakMap,o=Symbol(),c=Symbol(),h=Symbol(),l=Symbol(),d=Symbol(),u=Symbol(),m=Symbol(),g=Symbol(),p=Symbol(),_=Symbol(),f=Symbol(),y=Symbol(),b=Symbol(),v=Symbol(),S=Symbol(),w=Symbol(),M=Symbol(),x=Symbol(),B=Symbol(),k=Symbol(),C=Symbol(),E=Symbol(),I=Symbol(),T=Symbol(),R=Symbol(),P=Symbol(),D=Symbol();class L{constructor(e,t={}){const i=e.split("/").slice(0,-1).join("/");n.set(this,{[M]:e,[d]:t.icestatsEndpoint||i+"/status-json.xsl",[g]:t.statsEndpoint||i+"/stats",[f]:t.nextsongsEndpoint||i+"/nextsongs",[v]:t.sevenhtmlEndpoint||i+"/7.html",[k]:t.sources||[],[C]:1e3*(t.interval||30),[E]:t.onStats||r,[I]:t.onStatsFetch||r,[x]:t.icyMetaInt,[B]:t.icyDetectionTimeout,[o]:new AbortController,[h]:new AbortController,[u]:new AbortController,[p]:new AbortController,[y]:new AbortController,[S]:new AbortController,[T]:"stopped"})}static xml2Json(e){const t=e=>{if(!e.children.length)return Number.isNaN(Number(e.innerHTML))?e.innerHTML:Number(e.innerHTML);const i={};for(const s of e.children)s.nodeName in i?Array.isArray(i[s.nodeName])?i[s.nodeName].push(t(s)):i[s.nodeName]=[i[s.nodeName],t(s)]:i[s.nodeName]=t(s);return i};return t((e=>(new DOMParser).parseFromString(e,"application/xml"))(e))}get state(){return n.get(this)[T]}get icestatsEndpoint(){return n.get(this)[d]}get statsEndpoint(){return n.get(this)[g]}get nextsongsEndpoint(){return n.get(this)[f]}get sevenhtmlEndpoint(){return n.get(this)[v]}start(){"stopped"===n.get(this)[T]&&(n.get(this)[T]="running",this.fetch().then(n.get(this)[E]),n.get(this)[R]=setInterval(()=>{this.fetch().then(n.get(this)[E])},n.get(this)[C]))}stop(){"stopped"!==n.get(this)[T]&&(n.get(this)[T]="stopped",clearInterval(n.get(this)[R]),n.get(this)[o].abort(),n.get(this)[h].abort(),n.get(this)[u].abort(),n.get(this)[p].abort(),n.get(this)[S].abort())}async fetch(){if("fetching"!==n.get(this)[T]){const e=n.get(this)[T];n.get(this)[T]="fetching",n.get(this)[I](n.get(this)[k]);const t=[];n.get(this)[k].includes("icestats")&&t.push(this.getIcestats()),n.get(this)[k].includes("sevenhtml")&&t.push(this.getSevenhtml()),n.get(this)[k].includes("stats")&&t.push(this.getStats()),n.get(this)[k].includes("nextsongs")&&t.push(this.getNextsongs()),n.get(this)[k].includes("icy")&&t.push(this.getIcyMetadata()),n.get(this)[k].includes("ogg")&&t.push(this.getOggMetadata());const i=await Promise.all(t).then(e=>e.reduce((e,t)=>({...e,...t}),{}));return n.get(this)[T]="fetching"!==n.get(this)[T]?n.get(this)[T]:e,i}}async getIcestats(){return this[P]({status:m,endpoint:d,controller:u,mapper:e=>e.json()}).then(e=>({icestats:e&&e.icestats}))}async getSevenhtml(){return this[P]({status:w,endpoint:v,controller:S,mapper:async e=>(await e.text()).match(/(.*?)<\/body>/gi).map(e=>{const t=e.match(/(<body>|,)(?<stats>.*)<\/body>/i).groups.stats.split(",");return 7===t.length?{StreamTitle:t[6],currentListeners:parseInt(t[4]),peakListeners:parseInt(t[2]),maxListeners:parseInt(t[3]),bitrate:parseInt(t[5]),status:parseInt(t[1]),serverListeners:parseInt(t[0])}:{StreamTitle:t[4],currentListeners:parseInt(t[2]),peakListeners:parseInt(t[0]),maxListeners:parseInt(t[1]),bitrate:parseInt(t[3])}})}).then(e=>({sevenhtml:e}))}async getStats(){return this[P]({status:_,endpoint:g,controller:p,mapper:async e=>L.xml2Json(await e.text()).SHOUTCASTSERVER.STREAMSTATS}).then(e=>({stats:e}))}async getNextsongs(){return this[P]({status:b,endpoint:f,controller:y,mapper:async e=>L.xml2Json(await e.text()).SHOUTCASTSERVER.NEXTSONGS}).then(e=>({nextsongs:e}))}async getIcyMetadata(){return this[D]({status:c,endpoint:M,controller:o,metadataType:"icy",headers:{"Icy-MetaData":1}})}async getOggMetadata(){return this[D]({status:l,endpoint:M,controller:h,metadataType:"ogg"})}async[D]({status:e,endpoint:t,controller:i,headers:s,metadataType:r}){return this[P]({status:e,endpoint:t,controller:i,headers:s,mapper:async e=>new Promise(t=>{new a.a(e,{onMetadata:({metadata:e})=>{n.get(this)[i].abort(),t(e)},onMetadataFailed:()=>{n.get(this)[i].abort(),t()},metadataTypes:r,icyMetaInt:n.get(this)[x],icyDetectionTimeout:n.get(this)[B]}).startReading()})}).then(e=>({[r]:e}))}async[P]({status:e,endpoint:t,controller:i,mapper:s,headers:a={}}){if(!n.get(this)[e])return n.get(this)[e]=!0,fetch(n.get(this)[t],{method:"GET",headers:a,signal:n.get(this)[i].signal}).then(e=>{if(!e.ok)throw new Error("HTTP Error "+e.status);return e}).then(s).catch(e=>{"AbortError"!==e.name&&console.warn("Failed to fetch "+n.get(this)[t],e)}).finally(()=>{n.get(this)[e]=!1,n.get(this)[i]=new AbortController})}}},281:function(e,t,i){var s=i(282);"string"==typeof s&&(s=[[e.i,s,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};i(6)(s,a);s.locals&&(e.exports=s.locals)},282:function(e,t,i){(e.exports=i(5)(!1)).push([e.i,'.theme--light.v-slider .v-slider__thumb,.theme--light.v-slider .v-slider__track-background,.theme--light.v-slider .v-slider__track-fill{background:rgba(0,0,0,.26)}.theme--dark.v-slider .v-slider__thumb,.theme--dark.v-slider .v-slider__track-background,.theme--dark.v-slider .v-slider__track-fill{background:hsla(0,0%,100%,.2)}.v-slider{cursor:default;display:flex;align-items:center;position:relative;flex:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.v-slider input{cursor:default;padding:0;width:100%;display:none}.v-slider__track-container{position:absolute;border-radius:0}.v-slider__thumb-container,.v-slider__track-background,.v-slider__track-fill{position:absolute;transition:.3s cubic-bezier(.25,.8,.5,1)}.v-slider__thumb-container{outline:none;top:50%}.v-slider__thumb-container:hover .v-slider__thumb:before{transform:scale(1)}.v-slider__thumb{position:absolute;width:12px;height:12px;left:-6px;top:50%;border-radius:50%;transition:.3s cubic-bezier(.25,.8,.5,1);transform:translateY(-50%);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.v-slider__thumb:before{transition:.3s cubic-bezier(.25,.8,.5,1);content:"";color:inherit;width:36px;height:36px;border-radius:50%;background:currentColor;opacity:.3;position:absolute;left:-12px;top:-12px;transform:scale(.1);pointer-events:none}.v-slider__tick,.v-slider__ticks-container{position:absolute}.v-slider__tick{opacity:0;background-color:rgba(0,0,0,.5);transition:.3s cubic-bezier(.25,.8,.5,1);border-radius:0}.v-slider__tick--filled{background-color:hsla(0,0%,100%,.5)}.v-application--is-ltr .v-slider__tick:first-child .v-slider__tick-label{transform:none}.v-application--is-rtl .v-slider__tick:first-child .v-slider__tick-label{transform:translateX(100%)}.v-application--is-ltr .v-slider__tick:last-child .v-slider__tick-label{transform:translateX(-100%)}.v-application--is-rtl .v-slider__tick:last-child .v-slider__tick-label{transform:none}.v-slider__tick-label{position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}.v-slider__thumb-label-container{top:0}.v-slider__thumb-label,.v-slider__thumb-label-container{position:absolute;left:0;transition:.3s cubic-bezier(.25,.8,.25,1)}.v-slider__thumb-label{display:flex;align-items:center;justify-content:center;font-size:.75rem;color:#fff;width:32px;height:32px;border-radius:50% 50% 0;bottom:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.v-slider--horizontal{min-height:32px;margin-left:8px;margin-right:8px}.v-slider--horizontal .v-slider__track-container{width:100%;height:2px;left:0;top:50%;transform:translateY(-50%)}.v-slider--horizontal .v-slider__track-background,.v-slider--horizontal .v-slider__track-fill{height:100%}.v-slider--horizontal .v-slider__ticks-container{left:0;height:2px;width:100%}.v-application--is-ltr .v-slider--horizontal .v-slider__tick:first-child .v-slider__tick-label{transform:translateX(0)}.v-application--is-rtl .v-slider--horizontal .v-slider__tick:first-child .v-slider__tick-label{transform:translateX(0)}.v-application--is-ltr .v-slider--horizontal .v-slider__tick:last-child .v-slider__tick-label{transform:translateX(-100%)}.v-application--is-rtl .v-slider--horizontal .v-slider__tick:last-child .v-slider__tick-label{transform:translateX(100%)}.v-slider--horizontal .v-slider__tick .v-slider__tick-label{top:8px}.v-application--is-ltr .v-slider--horizontal .v-slider__tick .v-slider__tick-label{transform:translateX(-50%)}.v-application--is-rtl .v-slider--horizontal .v-slider__tick .v-slider__tick-label{transform:translateX(50%)}.v-slider--horizontal .v-slider__thumb-label{transform:translateY(-20%) translateY(-12px) translateX(-50%) rotate(45deg)}.v-slider--horizontal .v-slider__thumb-label>*{transform:rotate(-45deg)}.v-slider--vertical{min-height:150px;margin-top:12px;margin-bottom:12px}.v-slider--vertical .v-slider__track-container{height:100%;width:2px;left:50%;top:0;transform:translateX(-50%)}.v-slider--vertical .v-slider__track-background,.v-slider--vertical .v-slider__track-fill{width:100%}.v-slider--vertical .v-slider__thumb-container{left:50%}.v-slider--vertical .v-slider__ticks-container{top:0;width:2px;height:100%;left:50%;transform:translateX(-50%)}.v-application--is-ltr .v-slider--vertical .v-slider__tick .v-slider__tick-label,.v-application--is-ltr .v-slider--vertical .v-slider__tick:first-child .v-slider__tick-label,.v-application--is-ltr .v-slider--vertical .v-slider__tick:last-child .v-slider__tick-label{transform:translateY(-50%);left:12px}.v-application--is-rtl .v-slider--vertical .v-slider__tick .v-slider__tick-label,.v-application--is-rtl .v-slider--vertical .v-slider__tick:first-child .v-slider__tick-label,.v-application--is-rtl .v-slider--vertical .v-slider__tick:last-child .v-slider__tick-label{transform:translateY(-50%);right:12px}.v-slider--vertical .v-slider__thumb-label>*{transform:rotate(-135deg)}.v-slider__thumb-container--focused .v-slider__thumb:before{transform:scale(1)}.v-slider--active .v-slider__tick{opacity:1}.v-slider__thumb-container--active .v-slider__thumb:before{transform:scale(1.5)!important}.v-slider--disabled{pointer-events:none}.v-slider--disabled .v-slider__thumb{width:8px;height:8px;left:-4px}.v-slider--disabled .v-slider__thumb:before{display:none}.v-slider__ticks-container--always-show .v-slider__tick{opacity:1}.v-input__slider.v-input--is-readonly>.v-input__control{pointer-events:none}.v-application--is-ltr .v-input__slider .v-input__slot .v-label{margin-left:0;margin-right:12px}.v-application--is-ltr .v-input__slider--inverse-label .v-input__slot .v-label,.v-application--is-rtl .v-input__slider .v-input__slot .v-label{margin-right:0;margin-left:12px}.v-application--is-rtl .v-input__slider--inverse-label .v-input__slot .v-label{margin-left:0;margin-right:12px}.v-input__slider--vertical{align-items:center}.v-application--is-ltr .v-input__slider--vertical{flex-direction:column-reverse}.v-application--is-rtl .v-input__slider--vertical{flex-direction:column}.v-input__slider--vertical .v-input__append-outer,.v-input__slider--vertical .v-input__prepend-outer,.v-input__slider--vertical .v-input__slot{margin:0}.v-input__slider--vertical .v-messages{display:none}.v-input--has-state .v-slider__track-background{opacity:.4}',""])},450:function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},451:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},452:function(e,t){e.exports=class{constructor(){this._totalBytesRead=0,this._streamBytesRead=0,this._metadataLengthBytesRead=0,this._metadataBytesRead=0,this._currentBytesRemaining=0,this._currentStreamBytesRemaining=0,this._currentMetadataBytesRemaining=0}get stats(){return{totalBytesRead:this._totalBytesRead,streamBytesRead:this._streamBytesRead,metadataLengthBytesRead:this._metadataLengthBytesRead,metadataBytesRead:this._metadataBytesRead,currentBytesRemaining:this._currentBytesRemaining,currentStreamBytesRemaining:this._currentStreamBytesRemaining,currentMetadataBytesRemaining:this._currentMetadataBytesRemaining}}set currentStreamBytesRemaining(e){this._currentStreamBytesRemaining+=e}set currentMetadataBytesRemaining(e){this._currentMetadataBytesRemaining=e}addBytes(e){this._totalBytesRead+=e,this._currentBytesRemaining-=e}addStreamBytes(e){this._streamBytesRead+=e,this._currentStreamBytesRemaining-=e}addMetadataLengthBytes(e){this._metadataLengthBytesRead+=e}addMetadataBytes(e){this._metadataBytesRead+=e,this._currentMetadataBytesRemaining-=e}addCurrentBytesRemaining(e){this._currentBytesRemaining+=e}}},453:function(e,t,i){const s=i(231),a=i(232);e.exports=class{constructor(e){const{onStream:t,...i}=e;this._oggMetadataParser=new a(e),this._icyMetadataParser=new s(i)}get icyMetaInt(){return this._icyMetadataParser.icyMetaInt}*iterator(e){for(const t of this._icyMetadataParser.iterator(e))t.stream?yield*this._oggMetadataParser.iterator(t.stream):yield t}readAll(e){for(const t of this._icyMetadataParser.iterator(e))t.stream&&this._oggMetadataParser.readAll(t.stream)}async*asyncIterator(e){for await(const t of this._icyMetadataParser.asyncIterator(e))if(t.stream)for await(const e of this._oggMetadataParser.asyncIterator(t.stream))yield e;else yield t}async asyncReadAll(e){for await(const t of this._icyMetadataParser.iterator(e))t.stream&&await this._oggMetadataParser.asyncReadAll(t.stream)}}},454:function(e,t){e.exports=class{constructor(){this._totalBytesRead=0,this._streamBytesRead=0,this._metadataLengthBytesRead=0,this._metadataBytesRead=0,this._currentBytesRemaining=0,this._currentStreamBytesRemaining=0,this._currentMetadataBytesRemaining=0}get stats(){return{totalBytesRead:this._totalBytesRead,streamBytesRead:this._streamBytesRead,metadataLengthBytesRead:this._metadataLengthBytesRead,metadataBytesRead:this._metadataBytesRead,currentBytesRemaining:this._currentBytesRemaining,currentStreamBytesRemaining:this._currentStreamBytesRemaining,currentMetadataBytesRemaining:this._currentMetadataBytesRemaining}}set currentStreamBytesRemaining(e){this._currentStreamBytesRemaining+=e}set currentMetadataBytesRemaining(e){this._currentMetadataBytesRemaining=e}addBytes(e){this._totalBytesRead+=e,this._currentBytesRemaining-=e}addStreamBytes(e){this._streamBytesRead+=e,this._currentStreamBytesRemaining-=e}addMetadataLengthBytes(e){this._metadataLengthBytesRead+=e}addMetadataBytes(e){this._metadataBytesRead+=e,this._currentMetadataBytesRemaining-=e}addCurrentBytesRemaining(e){this._currentBytesRemaining+=e}}},455:function(e,t,i){const s=i(234),a=i(235);e.exports=class{constructor(e){const{onStream:t,...i}=e;this._oggMetadataParser=new a(e),this._icyMetadataParser=new s(i)}get icyMetaInt(){return this._icyMetadataParser.icyMetaInt}*iterator(e){for(const t of this._icyMetadataParser.iterator(e))t.stream?yield*this._oggMetadataParser.iterator(t.stream):yield t}readAll(e){for(const t of this._icyMetadataParser.iterator(e))t.stream&&this._oggMetadataParser.readAll(t.stream)}async*asyncIterator(e){for await(const t of this._icyMetadataParser.asyncIterator(e))if(t.stream)for await(const e of this._oggMetadataParser.asyncIterator(t.stream))yield e;else yield t}async asyncReadAll(e){for await(const t of this._icyMetadataParser.iterator(e))t.stream&&await this._oggMetadataParser.asyncReadAll(t.stream)}}}}]);