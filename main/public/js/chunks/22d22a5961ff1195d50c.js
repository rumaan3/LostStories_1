(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{120:function(e,r,t){"use strict";t.d(r,"a",(function(){return l}));var n="https://js.stripe.com/v3",a=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,i="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",s=null,o=function(e){return null!==s?s:s=new Promise((function(r,t){if("undefined"!=typeof window)if(window.Stripe&&e&&console.warn(i),window.Stripe)r(window.Stripe);else try{var s=function(){for(var e=document.querySelectorAll('script[src^="'.concat(n,'"]')),r=0;r<e.length;r++){var t=e[r];if(a.test(t.src))return t}return null}();s&&e?console.warn(i):s||(s=function(e){var r=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",t=document.createElement("script");t.src="".concat(n).concat(r);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(t),t}(e)),s.addEventListener("load",(function(){window.Stripe?r(window.Stripe):t(new Error("Stripe.js not available"))})),s.addEventListener("error",(function(){t(new Error("Failed to load Stripe.js"))}))}catch(e){return void t(e)}else r(null)}))},c=function(e,r,t){if(null===e)return null;var n=e.apply(void 0,r);return function(e,r){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.14.0",startTime:r})}(n,t),n},d=Promise.resolve().then((function(){return o(null)})),u=!1;d.catch((function(e){u||console.warn(e)}));var l=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];u=!0;var n=Date.now();return d.then((function(e){return c(e,r,n)}))}},242:function(e,r,t){var n=t(468);"string"==typeof n&&(n=[[e.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};t(6)(n,a);n.locals&&(e.exports=n.locals)},467:function(e,r,t){"use strict";t(242)},468:function(e,r,t){(e.exports=t(5)(!1)).push([e.i,".loading-circle-button[data-v-7b6bc1d4]{width:30px;height:16px}#card-elements[data-v-7b6bc1d4]{padding:11.4px 12px}.credit-card[data-v-7b6bc1d4]{max-width:40px}.StripeElement[data-v-7b6bc1d4]{border:1px solid rgba(43,43,43,.15);border-radius:5px;padding:1em}.StripeElement--focus[data-v-7b6bc1d4]{border:2px solid var(--color-primary)}.StripeElement--invalid[data-v-7b6bc1d4]{border:2px solid #f84a4a}",""])},704:function(e,r,t){"use strict";t.r(r);var n=t(12),a=t.n(n),i=t(120);function s(e,r,t,n,a,i,s){try{var o=e[i](s),c=o.value}catch(e){return void t(e)}o.done?r(c):Promise.resolve(c).then(n,a)}function o(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var i=e.apply(r,t);function o(e){s(i,n,a,o,c,"next",e)}function c(e){s(i,n,a,o,c,"throw",e)}o(void 0)}))}}var c={props:["chosenPlan","isSubscriptionLoading"],mounted:function(){var e=this;return o(a.a.mark((function r(){var t;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.isScriptLoading=!0,r.next=3,Object(i.a)(e.$store.getters.getSettings.stripeClientID);case 3:e.stripe=r.sent,t=e.stripe.elements(),e.cardElement=t.create("card"),e.cardElement.on("change",function(e){e.complete?this.validCardInput=!0:e.error&&(this.validCardInput=!1,this.$emit("error",e.error.message))}.bind(e)),setTimeout((function(){e.isScriptLoading=!1}),1e3),e.cardElement.mount("#card-element");case 9:case"end":return r.stop()}}),r)})))()},data:function(){return{newCard:!1,cardElement:null,validCardInput:!0,stripe:null,isScriptLoading:!0}},computed:{hasCard:function(){return this.user.card_brand&&this.user.card_last_four&&!this.newCard},user:function(){return this.$store.getters.getUser}},methods:{subscribeWithStripe:function(){var e=this;return o(a.a.mark((function r(){var t;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.$emit("isSubscriptionLoading",!0),e.$emit("error",!1),r.prev=2,t=null,e.hasCard||e.chosenPlan.free){r.next=8;break}return r.next=7,e.createPaymentMethod();case 7:t=r.sent;case 8:e.$emit("createSubscription",{gateway:"stripe",paymentMethod:t}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(2),e.error||(e.$emit("error",e.$t("Oops! Some error occurred. Try again later.")),e.$emit("isSubscriptionLoading",!1));case 14:case"end":return r.stop()}}),r,null,[[2,11]])})))()},createPaymentMethod:function(){var e=this;return o(a.a.mark((function r(){var t,n;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.stripe.createPaymentMethod("card",e.cardElement,{billing_details:{}});case 2:if(t=r.sent,n=t.paymentMethod,!t.error){r.next=9;break}e.error||(e.$emit("error",e.$t("Oops! Some error occurred. Try again later.")),e.$emit("isSubscriptionLoading",!1)),r.next=10;break;case 9:return r.abrupt("return",n);case 10:case"end":return r.stop()}}),r)})))()}}},d=(t(467),t(0)),u=t(1),l=t.n(u),p=t(81),v=t(105),g=t(3),m=t(75),f=t(273),b=Object(d.a)(c,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-card",{attrs:{flat:""}},[t("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!e.isScriptLoading,expression:"!isScriptLoading"}]},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.hasCard,expression:"!hasCard"}],attrs:{id:"card-element"}}),e._v(" "),e.hasCard?t("div",{staticClass:"existing-card d-flex align-center justify-space-between"},[t("div",{staticClass:"existing-card__details d-flex align-center"},[t("div",{staticClass:"credit-card mr-2"},["visa"==e.$store.getters.getUser.card_brand?t("v-img",{attrs:{src:"/storage/defaults/images/billing/visa-blue.png"}}):e._e(),e._v(" "),"mastercard"==e.$store.getters.getUser.card_brand?t("v-img",{attrs:{src:"/storage/defaults/images/billing/mastercard.png"}}):e._e(),e._v(" "),"jcb"==e.$store.getters.getUser.card_brand?t("v-img",{attrs:{src:"/storage/defaults/images/billing/jcb.png"}}):e._e(),e._v(" "),"amex"==e.$store.getters.getUser.card_brand?t("v-img",{attrs:{src:"/storage/defaults/images/billing/american_express.png"}}):e._e(),e._v(" "),"discover"==e.$store.getters.getUser.card_brand?t("v-img",{attrs:{src:"/storage/defaults/images/billing/discover.png"}}):e._e(),e._v(" "),"unionpay"==e.$store.getters.getUser.card_brand?t("v-img",{attrs:{src:"/storage/defaults/images/billing/unionpay.png"}}):e._e()],1),e._v(" "),t("div",{staticClass:"existing-card__digits"},[t("strong",[e._v("****")]),e._v(" "),t("strong",[e._v(e._s(e.$store.getters.getUser.card_last_four))])])]),e._v(" "),t("div",{staticClass:"exsiting-card__options"},[t("v-btn",{attrs:{icon:""},on:{click:function(r){e.newCard=!0}}},[t("v-icon",{attrs:{color:"error",title:e.$t("Remove card")}},[e._v("$vuetify.icons.credit-card-refresh")])],1)],1)]):e._e(),e._v(" "),t("v-btn",{staticClass:"primary mt-5",attrs:{disabled:e.isSubscriptionLoading||!e.validCardInput,loading:e.isSubscriptionLoading},on:{click:e.subscribeWithStripe},scopedSlots:e._u([{key:"loader",fn:function(){return[t("span",{staticClass:"custom-loader"},[t("v-icon",{attrs:{light:""}},[e._v("$vuetify.icons.cached")])],1)]},proxy:!0}])},[e._v("\n\n            "+e._s(e.$t("Subscribe"))+"\n        ")])],1),e._v(" "),t("page-loading",{directives:[{name:"show",rawName:"v-show",value:e.isScriptLoading,expression:"isScriptLoading"}],attrs:{height:"20vh",size:50,width:5}})],1)}),[],!1,null,"7b6bc1d4",null);r.default=b.exports;l()(b,{VBtn:p.a,VCard:v.a,VCardText:g.b,VIcon:m.a,VImg:f.a})}}]);